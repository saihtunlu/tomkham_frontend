(function(t){function e(e){for(var s,o,r=e[0],c=e[1],l=e[2],d=0,p=[];d<r.length;d++)o=r[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&p.push(i[o][0]),i[o]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);u&&u(e);while(p.length)p.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],s=!0,r=1;r<a.length;r++){var c=a[r];0!==i[c]&&(s=!1)}s&&(n.splice(e--,1),t=o(o.s=a[0]))}return t}var s={},i={app:0},n=[];function o(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=s,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(a,s,function(e){return t[e]}.bind(null,s));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0f2c":function(t,e,a){"use strict";var s=a("e23d"),i=a.n(s);i.a},1545:function(t){t.exports=JSON.parse('{"message":"Mai Son Kha","analytics":"Analytics (in Tai)","sale":"Sales (in Tai)"}')},3261:function(t,e,a){},"3dfa":function(t,e,a){"use strict";var s=a("69ff"),i=a.n(s);i.a},"439f":function(t,e,a){},5664:function(t,e,a){"use strict";var s=a("3261"),i=a.n(s);i.a},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid",class:[t.addBg?"add-bg":"no-bg-color",t.isMobile&&"mobile",t.isTablet&&"tablet",t.showMenu&&"show-menu"],attrs:{id:"app"}},[a("fade-transition",{attrs:{duration:1200}},[t.isTablet||!t.isAuthenticated?a("div",{staticClass:"app-bg primary-box-bg"},[a("div",{staticClass:"app-circle-1"}),a("div",{staticClass:"app-rectangle-1"}),a("div",{staticClass:"app-rectangle-2"})]):t._e()]),a("slide-x-left-transition",{attrs:{duration:1200}},[t.isAuthenticated&&t.showMenu?a("Sidebar"):t._e()],1),a("div",{staticClass:"content-view",class:t.isAuthenticated?"reduced":"full-width"},[t.isAuthenticated&&t.isMobile||t.isAuthenticated&&t.isTablet?a("vs-button",{staticClass:"menu-btn",attrs:{icon:"",circle:"",flat:""},on:{click:function(e){t.showMenu=!t.showMenu}}},[a("i",{staticClass:"bx",class:t.showMenu?"bxs-chevron-left":"bxs-chevron-right"})]):t._e(),a("router-view",{key:t.$route.fullPath,staticClass:"route-view show-scroll",class:t.isAuthenticated?"reduced-veiw":"full-width-view",attrs:{isAllowedToScroll:t.isAllowedToScroll},nativeOn:{scroll:function(e){return t.onScroll(e)}}})],1),a("slide-y-down-transition",[t.isAuthenticated&&t.showScrollToTop?a("vs-button",{staticClass:"scroll-to-top",attrs:{icon:"",circle:"",flat:""},on:{click:t.scrollToTop}},[a("i",{staticClass:"bx bxs-chevron-up"})]):t._e()],1)],1)},n=[],o=(a("b0c0"),a("5530")),r=a("2f62"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sidebar"},[t._m(0),a("div",{staticClass:"sidebar-items show-scroll"},t._l(t.menu,(function(e){return a("router-link",{key:e.name,staticClass:"menuItem d-flex align-center justify-content-between text",class:t.active==e.class&&"exact-active",attrs:{"active-class":"active",id:"Dashboard",to:e.route}},[a("div",{staticClass:"d-flex align-items-center"},[a("i",{staticClass:"mr-2",class:e.icon,staticStyle:{"z-index":"100"}}),a("span",{staticClass:"mb-0 title",staticStyle:{"z-index":"100"}},[t._v(" "+t._s(e.name)+" ")])]),a("zoom-center-transition",{attrs:{duration:1e3}},[t.active==e.class?a("span",{staticClass:"white-dot"}):t._e()])],1)})),1),a("Nav")],1)},l=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sidebar-header"},[a("h2",{staticClass:"logo-text text-white mb-0 font-weight-bold"},[t._v(" မွၵ်ႇငိုၼ်းၶဝ်ႈ ")])])}],u=[{name:"Dashboard",route:"/",icon:"bx bx-grid-alt",class:"dashboard"},{name:"Sale",route:"/sales",icon:"bx bx-chart",class:"sale"},{name:"Sale Products",route:"/sale-products",icon:"bx bxs-truck",class:"sale-product"},{name:"Products",route:"/products",icon:"bx bx-box",class:"product"},{name:"Inventory",route:"/inventory",icon:"bx bx-gift",class:"inventory"},{name:"Imports",route:"/imports",icon:"bx bx-download",class:"import"}],d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{staticClass:"nav d-flex align-items-center"},[a("Lang"),a("Theme"),a("div",{staticClass:"nav-item d-flex justify-content-center align-items-center pointer text-white",attrs:{title:"Logout"},on:{click:function(e){return t.$store.dispatch("logout")}}},[a("i",{staticClass:"bx bx-log-out"})])],1)},p=[],m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"nav-item d-flex justify-content-center align-items-center pointer text-white",attrs:{title:"Theme"},on:{click:function(e){t.dark=!t.dark}}},[t.dark?a("i",{staticClass:"bx bxs-moon"}):a("i",{staticClass:"bx bxs-sun"})])},v=[],f={data:function(){return{dark:!1}},created:function(){var t=localStorage.getItem("theme");t&&(this.dark="dark"===t)},watch:{dark:function(){this.changeTheme()}},mounted:function(){},methods:{changeTheme:function(){var t=this.dark?"dark":"light";this.$vs.setTheme(t),localStorage.setItem("theme",t)}}},h=f,g=a("0c7c"),_=Object(g["a"])(h,m,v,!1,null,null,null),b=_.exports,y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"nav-item d-flex justify-content-center align-items-center pointer text-white",attrs:{title:"Change language"},on:{click:function(e){return t.changeLang()}}},["en"==t.lang?a("span",{staticClass:"icon-text"},[t._v("EN")]):a("span",{staticClass:"icon-text"},[t._v("TAI")])])},C=[],x={data:function(){return{lang:"en"}},watch:{},created:function(){var t=localStorage.getItem("lang");t&&(this.$i18n.locale=t,this.lang=t)},methods:{changeLang:function(){this.lang="en"==this.lang?"tai":"en",this.$i18n.locale=this.lang,localStorage.setItem("lang",this.lang)}}},w=x,k=(a("eb68"),Object(g["a"])(w,y,C,!1,null,null,null)),S=k.exports,P={data:function(){return{query:""}},components:{Theme:b,Lang:S},methods:{handleCommand:function(t){"logout"===t&&this.$store.dispatch("logout")}}},$=P,I=(a("e480"),Object(g["a"])($,d,p,!1,null,null,null)),j=I.exports,D={data:function(){return{isReduced:!1,active:"Dashboard",menu:u}},computed:{},components:{Nav:j},watch:{$route:function(t){this.active=t.meta.class}},mounted:function(){this.active=this.$route.meta.class},methods:{toggleSideBar:function(){this.$store.commit("setReduce",this.isReduced)}}},E=D,T=(a("3dfa"),Object(g["a"])(E,c,l,!1,null,"a23967a2",null)),O=T.exports,N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[t._m(0),a("div",{staticClass:"col-12"},[t.multiple?a("fade-transition",{staticClass:"row media-box mx-0",attrs:{group:""}},[t._l(t.selected,(function(e,s){return a("div",{key:e.image+s,staticClass:"col-3 px-0 mb-2 selected-images"},[a("span",{staticClass:"remove-image pointer",on:{click:function(e){return t.removeImage(s)}}},[a("i",{staticClass:"bx bx-x"})]),a("img",{staticStyle:{height:"150px !important"},attrs:{src:t.mediaUrl+e.image,alt:""}})])})),a("div",{key:"uploader",staticClass:"col-3 pointer mb-2 px-0"},[a("div",{staticClass:"file-uploader",staticStyle:{height:"150px !important",width:"100% !important"},on:{click:function(e){t.openUploader=!t.openUploader}}},[a("i",{staticClass:"bx bx-camera"}),a("p",[t._v("Add Image")])])])],2):t._e(),!t.multiple&&t.selected.length>0?a("fade-transition",{staticClass:"row media-box mx-0",attrs:{group:""}},t._l(t.selected,(function(e,s){return a("div",{key:e.image+s,staticClass:"col-3 px-0 mb-2 selected-images"},[a("span",{staticClass:"remove-image pointer",on:{click:function(e){return t.removeImage(s)}}},[a("i",{staticClass:"bx bx-x"})]),a("img",{staticStyle:{height:"150px !important"},attrs:{src:t.mediaUrl+e.image,alt:""}})])})),0):t._e(),!t.multiple&&t.selected.length<1?a("div",{staticClass:"row media-box mx-0"},[a("div",{staticClass:"col-3 pointer mb-2 px-0"},[a("div",{staticClass:"file-uploader",staticStyle:{height:"150px !important",width:"100% !important"},on:{click:function(e){t.openUploader=!t.openUploader}}},[a("i",{staticClass:"bx bx-camera"}),a("p",[t._v("Add Image")])])])]):t._e()],1),a("vs-dialog",{attrs:{blur:"","not-close":"","prevent-close":"",id:"uploader"},model:{value:t.openUploader,callback:function(e){t.openUploader=e},expression:"openUploader"}},[a("div",{ref:"content",staticClass:"row uploader-box",staticStyle:{height:"100% !important"}},[a("div",{staticClass:"col-12 d-flex justify-content-between align-items-center"},[a("p",{staticClass:"my-0 title"},[t._v("Media")]),a("div",{staticClass:"d-flex align-items-center"},[a("vs-button",{attrs:{active:"upload"===t.type,flat:""},on:{click:function(e){t.type="upload"}}},[t._v(" upload new ")]),a("vs-button",{staticClass:"mr-0",attrs:{active:"select"===t.type,flat:""},on:{click:function(e){t.type="select"}}},[t._v(" select from media ")])],1)]),a("div",{staticClass:"col-12 px-0"},[a("div",{staticClass:"divider mt-0 mb-0"})]),"select"===t.type?a("div",{ref:"imageBox",staticClass:"col-8 show-scroll pt-3 images-select-view right-border"},[a("scale-transition",{staticClass:"row px-2",attrs:{group:""}},t._l(t.file,(function(e){return a("div",{key:e.image,staticClass:"col-3 px-2 mb-3 image-box"},[a("vs-checkbox",{staticClass:"image-check",attrs:{val:!0},on:{change:function(a){return t.changeSelect(e)}},model:{value:e.isSelected,callback:function(a){t.$set(e,"isSelected",a)},expression:"data.isSelected"}},[a("img",{staticClass:"simple-image lazy",class:e.isSelected&&"selected",staticStyle:{width:"100% !important"},attrs:{src:"/image/loader.svg","data-src":t.mediaUrl+e.image,alt:""},on:{load:t.setHeight}})])],1)})),0)],1):t._e(),"select"===t.type?a("div",{staticClass:"col-4 d-flex justify-content-between flex-column"},[a("div",{staticClass:"row w-100 mx-0 selected-view pt-3"},[a("div",{staticClass:"col-12 d-flex justify-content-between align-items-center px-0"},[a("p",{staticClass:"my-0"},[t._v("Selected images")]),a("vs-button",{attrs:{danger:"",icon:"",transparent:"",loading:t.removing},on:{click:t.removeFiles}},[a("i",{staticClass:"bx bxs-trash-alt"})])],1),a("fade-transition",{staticClass:"row px-0 mx-0",staticStyle:{"max-height":"51vh","overflow-y":"auto"},attrs:{group:""}},t._l(t.selected,(function(e){return a("div",{key:e.image,staticClass:"col-4 px-1 mb-3"},[a("img",{staticClass:"simple-image",staticStyle:{width:"100% !important"},attrs:{src:t.mediaUrl+e.image,alt:""},on:{load:t.setHeight}})])})),0)],1),a("footer",{staticClass:"w-100"},[a("div",{staticClass:"divider mt-0 mb-2"}),a("div",{staticClass:"d-flex justify-content-between"},[a("vs-button",{staticClass:"mx-0 w-100",attrs:{block:""},on:{click:t.selectImage}},[t._v(" Done ")])],1)])]):t._e(),"upload"===t.type?a("div",{staticClass:"col-12 d-flex justify-content-center align-items-center",staticStyle:{height:"68vh"}},[a("div",{staticClass:"file-uploader d-flex justify-content-center align-items-center",staticStyle:{width:"70%"}},[a("input",{ref:"fileInput",staticClass:"uploader-file-input pointer",attrs:{type:"file",multiple:"",name:""},on:{change:t.onFileChange}}),a("div",{staticClass:"flex-column d-flex justify-content-center align-items-center"},[a("p",{staticClass:"gray mb-2"},[t._v("Drag images here to upload Or")]),a("vs-button",{on:{click:function(e){return t.$refs.fileInput.click()}}},[t._v("Add images")])],1)])]):t._e()])])],1)},A=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-12"},[a("label",{staticStyle:{"font-size":"0.75rem","padding-left":"10px"}},[t._v("Media")])])}],L=(a("4de4"),a("4160"),a("fb6a"),a("a434"),a("159b"),"http://localhost:8000"),M="http://localhost:3001",z="http://localhost:3000",U=a("bc3a"),q=a.n(U),F={props:{multiple:{type:Boolean,default:!1},initialData:{type:Array}},data:function(){return{openUploader:!1,apiUrl:L,mediaUrl:M,type:"select",removing:!1,newImages:[],selected:[]}},watch:{type:function(t){var e=this;"select"===t&&setTimeout((function(){e.lazyLoad(),e.$refs.imageBox.scrollTo(0,0),e.$refs.imageBox.addEventListener("scroll",e.lazyLoad)}),100)},openUploader:function(t){var e=this;t&&setTimeout((function(){e.lazyLoad(),e.$refs.imageBox.scrollTo(0,0),e.$refs.imageBox.addEventListener("scroll",e.lazyLoad)}),200)}},computed:Object(o["a"])({},Object(r["c"])(["file"])),mounted:function(){this.initialData&&(this.selected=this.initialData)},methods:{changeSelect:function(t){this.multiple?this.selected=this.file.filter((function(t){return t.isSelected})):(this.file.filter((function(e){e.image!==t.image&&(e.isSelected=!1)})),this.selected=[t])},setHeight:function(t){t.path[0].style.height=t.path[0].clientWidth+"px"},onFileChange:function(t){var e=this;if(!/\.(jpg|jpeg|png|JPG|PNG)$/.test(t.target.value))return alert("The file uploaded need to be -jpeg,jpg,png"),!1;if(parseInt(t.target.files.length)>11&&this.newImages.length>11)return alert("You can only upload a maximum of 10 files"),!1;var a=this.$vs.loading({target:this.$refs.content,scale:.5}),s=t.target.files,i={headers:{"content-type":"multipart/form-data"}},n=new FormData;n.append("length",s.length),s.forEach((function(t,e){n.append("image"+e,t)})),q.a.post("api/file/",n,i).then((function(t){e.$store.commit("addFile",t.data),a.close(),e.type="select"})).catch((function(t){a.close(),e.$noti.display(t,"","error","danger")}))},selectImage:function(){this.$emit("completed",this.selected),this.openUploader=!1},removeFiles:function(){var t=this;if(this.selected.length>0){this.removing=!0;var e=[];this.selected.forEach((function(t){e.push(t.id)})),q.a.post("api/remove-files/",{data:e}).then((function(){t.$store.commit("removeFile",e),t.selected=[],t.removing=!1,t.$noti.display("Cool! File has been successfully deleted.","","normal","success")}))}},removeImage:function(t){this.selected.splice(t,1),this.$emit("completed",this.selected)},lazyLoad:function(){var t=this,e=[].slice.call(document.querySelectorAll("img.lazy")),a=!1;!1===a&&(a=!0,setTimeout((function(){e.forEach((function(a){a.getBoundingClientRect().top<=t.$refs.imageBox.clientHeight&&a.getBoundingClientRect().bottom>=0&&"none"!==getComputedStyle(a).display&&(a.src=a.dataset.src,a.classList.remove("lazy"),e=e.filter((function(t){return t!==a})),0===e.length&&t.$refs.imageBox.removeEventListener("scroll",t.lazyLoad))})),a=!1}),200))}}},B=F,R=(a("dc62"),Object(g["a"])(B,N,A,!1,null,null,null)),Y=(R.exports,a("9029")),K={data:function(){return{addBg:!1,showScrollToTop:!1,isAllowedToScroll:!1,isMobile:Y["isMobileOnly"],isTablet:Y["isTablet"],showMenu:!1}},components:{Sidebar:O},computed:Object(o["a"])(Object(o["a"])({},Object(r["b"])(["isAuthenticated"])),Object(r["c"])(["isReady","user"])),watch:{$route:function(t){this.checkMenu(),"Login"==t.name?this.addBg=!0:this.addBg=!1,this.isAllowedToScroll=!0,this.showScrollToTop=!1}},created:function(){this.checkMenu(),"Login"==this.$route.name?this.addBg=!0:this.addBg=!1},methods:{checkMenu:function(){this.isMobile||this.isTablet?this.showMenu=!1:this.showMenu=!0},scrollToTop:function(){var t=document.getElementsByClassName("route-view")[0];t.scrollTo(0,0)},onScroll:function(t){var e=document.getElementsByClassName("header-search-bar")[0];e&&(t.target.scrollTop>500?e.classList.add("show-search-bar"):e.classList.remove("show-search-bar")),this.showScrollToTop=t.target.scrollTop>500,this.isAllowedToScroll=t.target.scrollTop<100}}},V=K,W=Object(g["a"])(V,i,n,!1,null,null,null),Q=W.exports,H=a("8c4f");a("45fc");function J(){return localStorage.getItem("isLoggedIn")}var G=function(t){t.beforeEach((function(t,e,a){t.matched.some((function(t){return t.meta.requiresAuth}))?J()?a():a({name:"Login",query:{redirect:t.path}}):t.matched.some((function(t){return t.meta.requiresVisitor}))&&J()?a({name:"Dashboard"}):a()}))},Z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"auth bg-transparent"},[a("div",{staticClass:"row mt-0",attrs:{id:"auth"}},[a("div",{staticClass:"col-12 px-0 d-flex align-content-center justify-content-center"},[a("fade-transition",{attrs:{duration:1200}},[t.showLogin?a("div",{staticClass:"d-flex login-box align-content-center flex-column justify-content-center"},[a("form",{staticClass:"form",on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[a("h1",{staticClass:"text-center text-white font-weight-bolder mb-5"},[t._v(" မွၵ်ႇငိုၼ်းၶဝ်ႈ ")]),a("vs-input",{staticClass:"mb-3",attrs:{placeholder:"User name"},scopedSlots:t._u([{key:"icon",fn:function(){return[a("i",{staticClass:"bx bx-user"})]},proxy:!0}],null,!1,1893308880),model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),a("vs-input",{staticClass:"mb-3",attrs:{type:"password",placeholder:"Password"},scopedSlots:t._u([{key:"icon",fn:function(){return[a("i",{staticClass:"bx bx-lock-open-alt"})]},proxy:!0}],null,!1,1792762183),model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),a("vs-button",{staticClass:"w-100 mx-0 mb-3",attrs:{loading:t.isLoading,type:"submit"}},[t._v("Login")])],1)]):t._e()])],1)])])},X=[],tt={data:function(){return{email:"",password:"",isLoading:!1,showLogin:!1,currentTime:null,todayDate:null,toggleLoginView:!1}},created:function(){var t=this;setTimeout((function(){t.showLogin=!0}),500)},watch:{},methods:{onSubmit:function(){var t=this;this.isLoading=!0,this.$store.dispatch("logIn",{email:this.email,password:this.password}).then((function(e){t.isLoading=!1,e&&t.$noti.display(e,"","error","danger")}))}}},et=tt,at=(a("c7fc"),Object(g["a"])(et,Z,X,!1,null,null,null)),st=at.exports,it=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"inventory"},[a("div",{staticClass:"row mb-base"},[t._m(0),a("div",{staticClass:"w-100 position-absolute",staticStyle:{height:"100vh"}},[a("div",{ref:"loadingBox",staticClass:"route-loading"})]),t.getting?t._e():a("div",{staticClass:"col-12 mt-base fadeIn animated"},[a("div",{staticClass:"box pt-3"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 mb-3 d-flex align-items-center justify-content-between"},[a("div",{staticClass:"d-flex justify-content-between align-items-center"},[a("vs-select",{staticClass:"page-size-selector",on:{change:t.getInventory},model:{value:t.pageSize,callback:function(e){t.pageSize=e},expression:"pageSize"}},t._l(10,(function(e){return a("vs-option",{key:e,attrs:{label:5*e,value:5*e}},[t._v(" "+t._s(5*e)+" ")])})),1),a("vs-input",{attrs:{placeholder:"Search anything here"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)])]),a("vs-table",{scopedSlots:t._u([{key:"thead",fn:function(){return[a("vs-tr",[a("vs-th",[t._v(" Name")]),a("vs-th",[t._v(" Imported stock")]),a("vs-th",[t._v(" Number of stock")]),a("vs-th",[t._v(" Sold out")])],1)]},proxy:!0},{key:"tbody",fn:function(){return t._l(t.inventory.results,(function(e,s){return a("vs-tr",{key:s,staticClass:"animated fadeIn",style:"animation-delay: "+45*s+"ms",attrs:{data:e,"is-selected":!!t.selected.includes(e),"not-click-selected":"","open-expand-only-td":""}},[a("vs-td",[e.product?a("p",{staticClass:"mb-0"},[t._v(" "+t._s(e.product.name)+" ")]):a("p",{staticClass:"mb-0"},[a("span",[t._v(" "+t._s(e.variation_product.product_name+" - ")+" ")]),a("span",{staticClass:"primary md-text"},[t._v(" "+t._s(e.variation_product.name)+" ")])])]),a("vs-td",[t._v(" "+t._s(e.imported_stocks)+" ")]),a("vs-td",[t._v(" "+t._s(e.number_of_stock)+" ")]),a("vs-td",[t._v(" "+t._s(e.sold_out)+" ")])],1)}))},proxy:!0},{key:"notFound",fn:function(){return[a("div",{staticClass:"d-flex align-items-center justify-content-center",staticStyle:{height:"53vh"}},[a("div",[a("img",{attrs:{src:"image/noEvent.png",width:"150px",alt:""}}),a("p",{staticStyle:{color:"rgba(var(--vs-text), 0.7)"}},[t._v("No data found!")])])])]},proxy:!0},{key:"footer",fn:function(){return[a("vs-pagination",{attrs:{length:t.inventory.total_pages},model:{value:t.inventory.current_page,callback:function(e){t.$set(t.inventory,"current_page",e)},expression:"inventory.current_page"}})]},proxy:!0}],null,!1,1884231182),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1)])])])},nt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-12 pt-3 header d-flex align-items-center justify-content-between"},[a("p",{staticStyle:{"margin-bottom":"14px"}},[t._v("Inventory")]),a("div",{staticClass:"d-flex align-items-center"})])}],ot=(a("99af"),a("ac1f"),a("841c"),{data:function(){return{apiUrl:L,selectedStore:"",search:"",page:1,allCheck:!1,max:5,active:0,getting:!0,selected:[],gettingStores:!1,stores:[],inventory:{current_page:1,results:[]},pageSize:15,loading:null}},watch:{"inventory.current_page":{handler:function(){this.getInventory()},deep:!0},search:function(){this.getInventory()}},created:function(){var t=this;setTimeout((function(){t.loading=t.$vs.loading({target:t.$refs.loadingBox,scale:.6,type:"circles"}),t.getInventory()}),300)},mounted:function(){},methods:{getInventory:function(){var t=this,e="api/inventory/?page=".concat(this.inventory.current_page,"&page_size=").concat(this.pageSize,"&query=").concat(this.search);q.a.get(e).then((function(e){t.loading.close(),t.inventory.results=e.data.results,t.inventory.total_pages=e.data.total_pages,t.getting=!1})).catch((function(e){t.loading=!1,t.$noti.display(e,"","error","danger")}))}},computed:Object(o["a"])({},Object(r["c"])(["isReady"]))}),rt=ot,ct=Object(g["a"])(rt,it,nt,!1,null,null,null),lt=ct.exports,ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dashboard"},[a("div",{staticClass:"row mb-base"},[a("div",{staticClass:"col-12 header d-flex align-items-center justify-content-between"},[a("p",{staticClass:"mb-0"},[t._v("Analytics")]),a("div",{staticClass:"d-flex align-items-center my-1"},[a("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","value-format":"yyyy-MM-dd","range-separator":"To","start-placeholder":"Start date","end-placeholder":"End date","picker-options":t.pickerOptions},on:{change:t.getData},model:{value:t.dates,callback:function(e){t.dates=e},expression:"dates"}})],1)]),a("div",{staticClass:"w-100 position-absolute",staticStyle:{height:"100vh"}},[a("div",{ref:"loadingBox",staticClass:"route-loading"})]),t.getting?t._e():a("div",{staticClass:"col-12 mt-base animated fadeIn"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-4"},[a("div",{staticClass:"box status-box primary-box-bg"},[t._m(0),a("div",{staticClass:"circle2 animated zoomIn"}),a("div",{staticClass:"d-flex animated fadeInLeft flex-column justify-content-between",staticStyle:{height:"100%"}},[t._m(1),a("h1",{staticClass:"my-0 text-white",staticStyle:{"font-size":"35px"}},[t._v(" "+t._s(t.todayData.received_amounts)+" "),a("span",{staticClass:"title"},[t._v(" Ks ")])])])])]),a("div",{staticClass:"col-4"},[a("div",{staticClass:"box status-box success-box-bg"},[t._m(2),a("div",{staticClass:"circle2 animated zoomIn"}),a("div",{staticClass:"d-flex animated fadeInLeft flex-column justify-content-between",staticStyle:{height:"100%"}},[t._m(3),a("h1",{staticClass:"my-0 text-white",staticStyle:{"font-size":"35px"}},[t._v(" "+t._s(t.todayData.sale_prices)+" "),a("span",{staticClass:"title"},[t._v(" Ks ")])])])])]),a("div",{staticClass:"col-4"},[a("div",{staticClass:"box status-box warning-box-bg"},[t._m(4),a("div",{staticClass:"circle2 animated zoomIn"}),a("div",{staticClass:"d-flex animated fadeInLeft flex-column justify-content-between",staticStyle:{height:"100%"}},[t._m(5),a("h1",{staticClass:"my-0 text-white",staticStyle:{"font-size":"35px"}},[t._v(" "+t._s(t.todayData.sale_numbers)+" "),a("span",{staticClass:"title"},[t._v(t._s(parseInt(t.todayData.sale_numbers)>1?"Sales":"Sale"))])])])])]),a("div",{staticClass:"col-12 mt-base"},[a("div",{staticClass:"box"},[a("p",{staticClass:"my-0"},[t._v("Total Sale")]),a("p",{staticClass:"my-2 primary"},[t._v(" "+t._s(t.saleData[0].data.reduce((function(t,e){return t+e}),0))+"Ks ")]),a("apexchart",{attrs:{type:"area",height:"350",options:t.saleChartOptions,series:t.saleData}})],1)]),a("div",{staticClass:"col-12 mt-base"},[a("div",{staticClass:"box"},[a("p",{staticClass:"my-0"},[t._v("Total Sales")]),a("p",{staticClass:"my-2 primary"},[t._v(" "+t._s(t.noOfSaleData[0].data.reduce((function(t,e){return t+e}),0))+" Sales ")]),a("apexchart",{attrs:{type:"area",height:"350",options:t.noOfSaleChartOptions,series:t.noOfSaleData}})],1)]),a("div",{staticClass:"col-12 mt-base"},[a("div",{staticClass:"box"},[a("p",{staticClass:"mt-0"},[t._v("Top 5 Sold Out Products")]),a("vs-table",{scopedSlots:t._u([{key:"header",fn:function(){},proxy:!0},{key:"thead",fn:function(){return[a("vs-tr",[a("vs-th",{staticStyle:{width:"34% !important"},attrs:{sort:""},on:{click:function(e){t.topSoldOut=t.$vs.sortData(e,t.topSoldOut,"name")}}},[t._v(" Product ")]),a("vs-th",{staticStyle:{width:"12% !important"},attrs:{sort:""},on:{click:function(e){t.topSoldOut=t.$vs.sortData(e,t.topSoldOut,"sold_out")}}},[t._v(" Sold out ")]),a("vs-th",{staticStyle:{width:"12% !important"},attrs:{sort:""},on:{click:function(e){t.topSoldOut=t.$vs.sortData(e,t.topSoldOut,"price")}}},[t._v(" Unit Price ")]),a("vs-th",{staticStyle:{width:"12% !important"},attrs:{sort:""},on:{click:function(e){t.topSoldOut=t.$vs.sortData(e,t.topSoldOut,"subtotal")}}},[t._v(" Subtotal ")])],1)]},proxy:!0},{key:"notFound",fn:function(){return[a("div",{staticClass:"d-flex align-items-center justify-content-center"},[a("div",{staticClass:"my-2"},[a("img",{attrs:{src:"image/noEvent.png",width:"150px",alt:""}}),a("p",{staticStyle:{color:"rgba(var(--vs-text), 0.7)"}},[t._v(" No data found! ")])])])]},proxy:!0},{key:"tbody",fn:function(){return t._l(t.topSoldOut,(function(e,s){return a("vs-tr",{key:s,attrs:{data:e,"not-click-selected":"","open-expand-only-td":""}},[a("vs-td",[e.product?a("p",{staticClass:"m-0"},[t._v(" "+t._s(e.product.name)+" ")]):a("p",{staticClass:"m-0"},[a("span",[t._v(" "+t._s(e.variation_product.product_name+" - ")+" ")]),a("span",{staticClass:"primary md-text"},[t._v(" "+t._s(e.variation_product.name)+" ")])])]),a("vs-td",[t._v(" "+t._s(e.sold_out)+" ")]),a("vs-td",[t._v(" "+t._s(e.product?e.product.regular_price:e.variation_product.regular_price)+" Ks ")]),a("vs-td",[t._v(" "+t._s(parseInt(e.product?e.product.regular_price:e.variation_product.regular_price)*parseInt(e.sold_out))+" Ks ")])],1)}))},proxy:!0}],null,!1,2653991925),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1)])])])])])},dt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"circle1 animated zoomIn d-flex align-items-center justify-content-center"},[a("i",{staticClass:"primary bx bx-credit-card"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"margin-top":"25px"}},[a("h3",{staticClass:"mb-2 text-white"},[t._v("Today")]),a("p",{staticClass:"text-white"},[t._v("Received Amount")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"circle1 animated zoomIn d-flex align-items-center justify-content-center"},[a("i",{staticClass:"success bx bx-bar-chart"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"margin-top":"25px"}},[a("h3",{staticClass:"mb-2 text-white"},[t._v("Today")]),a("p",{staticClass:"text-white"},[t._v("Sale Amount")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"circle1 animated zoomIn d-flex align-items-center justify-content-center"},[a("i",{staticClass:"warning bx bx-gift"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"margin-top":"25px"}},[a("h3",{staticClass:"mb-2 text-white"},[t._v("Today")]),a("p",{staticClass:"text-white"},[t._v("Sale count")])])}],pt={data:function(){return{dates:[],url:L,getting:!0,pickerOptions:{shortcuts:[{text:"Last week",onClick:function(t){var e=new Date,a=new Date;e.setTime(e.getTime()+864e5),a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"Last month",onClick:function(t){var e=new Date,a=new Date;e.setTime(e.getTime()+864e5),a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"Last 3 months",onClick:function(t){var e=new Date,a=new Date;e.setTime(e.getTime()+864e5),a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}},{text:"Last 1 year",onClick:function(t){var e=new Date,a=new Date;e.setTime(e.getTime()+864e5),a.setTime(a.getTime()-31536e6),t.$emit("pick",[a,e])}}]},todayData:{},taxData:[],selected:[],topSoldOut:[],saleData:[],noOfSaleData:[],receivedAmountChartData:[],saleChartOptions:{chart:{height:350,type:"area",zoom:{enabled:!1},dropShadow:{enabled:!1},animations:{enabled:!0,easing:"ease-in-out",dynamicAnimation:{speed:1e3}}},colors:["#6A53D6","#c000ff"],dataLabels:{enabled:!1},stroke:{show:!0,width:1,colors:["transparent"]},xaxis:{type:"datetime",categories:[]},yaxis:{title:{text:"Price (Ks)"}},tooltip:{x:{format:"dd-MM-yyyy"},y:{formatter:function(t){return t+" Ks"}}}},noOfSaleChartOptions:{chart:{height:350,dropShadow:{enabled:!1},animations:{enabled:!0}},plotOptions:{bar:{horizontal:!1,columnWidth:"75%",endingShape:"rounded",opacity:.5}},colors:["#6A53D6"],dataLabels:{enabled:!1},stroke:{show:!0,width:1,colors:["transparent"]},xaxis:{type:"datetime",categories:[]},yaxis:{title:{text:"Sale"}},tooltip:{x:{format:"dd-MM-yyyy"},y:{formatter:function(t){return t+" sale(s)"}}}},today:null}},watch:{dates:function(){this.getData()}},computed:Object(o["a"])({},Object(r["c"])([])),created:function(){var t=this;setTimeout((function(){t.loading=t.$vs.loading({target:t.$refs.loadingBox,scale:.6,type:"circles"});var e=new Date,a=new Date;a.setTime(a.getTime()-864e6),e.setTime(e.getTime()+864e5),t.today=t.$moment().format("YYYY-MM-DD"),t.dates=[t.$moment(a).format("YYYY-MM-DD"),t.$moment(e).format("YYYY-MM-DD")]}),300)},methods:{getData:function(){var t=this;this.getting=!0,q.a.get("api/sale-reports/?from=".concat(this.dates[0],"&to=").concat(this.dates[1],"&today=").concat(this.today)).then((function(e){var a=e.data;t.todayData=a.today_data,t.saleData=[{name:"Sale amount",data:a.sale_prices.data},{name:"Received amount",data:a.received_amount.data}],t.noOfSaleData=[{name:"Number of sales",data:a.sale_numbers.data}],t.topSoldOut=a.top_sale,t.saleChartOptions.xaxis.categories=a.sale_prices.label,t.noOfSaleChartOptions.xaxis.categories=a.sale_numbers.label,t.loading&&t.loading.close(),t.getting=!1})).catch((function(e){t.getting=!1,t.$noti.display(e,"","error","danger")}))}}},mt=pt,vt=(a("6e01"),Object(g["a"])(mt,ut,dt,!1,null,null,null)),ft=vt.exports,ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"products show-scroll"},[a("div",{staticClass:"row mb-base"},[a("div",{staticClass:"col-12 header d-flex align-items-center justify-content-between"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/products"}}},[t._v("Products")])],1),a("div",{staticClass:"d-flex align-items-center"},[a("vs-button",{attrs:{transparent:"",to:"/create-new-product"}},[a("i",{staticClass:"bx bx-plus mr-1"}),t._v("Create new product ")])],1)],1),a("div",{staticClass:"w-100 position-absolute",staticStyle:{height:"100vh"}},[a("div",{ref:"loadingBox",staticClass:"route-loading"})]),t.getting?t._e():a("div",{staticClass:"col-12 mt-base animated fadeIn"},[a("div",{staticClass:"box pt-3 table-header"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 mb-3 d-flex align-items-center justify-content-between"},[a("div",{staticClass:"d-flex justify-content-between align-items-center"},[a("vs-select",{staticClass:"page-size-selector",on:{change:t.getProducts},model:{value:t.pageSize,callback:function(e){t.pageSize=e},expression:"pageSize"}},t._l(10,(function(e){return a("vs-option",{key:e,attrs:{label:5*e,value:5*e}},[t._v(" "+t._s(5*e)+" ")])})),1),a("vs-input",{attrs:{placeholder:"Search anything here"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"select a category"},on:{change:t.getProductsWithInitialPage},model:{value:t.selectedCategory,callback:function(e){t.selectedCategory=e},expression:"selectedCategory"}},t._l(t.categories,(function(t){return a("el-option",{key:t.name,attrs:{label:t.name,value:t.name}})})),1)],1)]),a("vs-table",{scopedSlots:t._u([{key:"thead",fn:function(){return[a("vs-tr",[a("vs-th",[t._v(" Name")]),a("vs-th",[t._v(" Barcode")]),a("vs-th",[t._v(" Category")]),a("vs-th",[t._v(" Sale price")])],1)]},proxy:!0},{key:"tbody",fn:function(){return t._l(t.products.results,(function(e,s){return a("vs-tr",{key:s,staticClass:"animated fadeIn",style:"animation-delay: "+45*s+"ms",attrs:{data:e,"is-selected":!!t.selected.includes(e),"not-click-selected":"","open-expand-only-td":""},on:{click:function(a){return t.$router.push({name:"Product",params:{id:e.is_main_product?e.id:e.product}})}}},[a("vs-td",[e.is_main_product?a("p",{staticClass:"mb-0"},[t._v(" "+t._s(e.name)+" ")]):a("p",{staticClass:"mb-0"},[a("span",[t._v(" "+t._s(e.product_name+" - ")+" ")]),a("span",{staticClass:"primary md-text"},[t._v(" "+t._s(e.name)+" ")])])]),a("vs-td",[t._v(" "+t._s(e.barcode)+" ")]),a("vs-td",[t._v(" "+t._s(e.category_name)+" ")]),a("vs-td",[t._v(" "+t._s(""==e.sale_price?""==e.regular_price?" - ":e.regular_price:e.sale_price)+" Ks ")])],1)}))},proxy:!0},{key:"notFound",fn:function(){return[a("div",{staticClass:"d-flex align-items-center justify-content-center",staticStyle:{height:"53vh"}},[a("div",[a("img",{attrs:{src:"image/noEvent.png",width:"150px",alt:""}}),a("p",{staticStyle:{color:"rgba(var(--vs-text), 0.7)"}},[t._v("No data found!")])])])]},proxy:!0},{key:"footer",fn:function(){return[a("vs-pagination",{attrs:{length:t.products.total_pages},model:{value:t.products.current_page,callback:function(e){t.$set(t.products,"current_page",e)},expression:"products.current_page"}})]},proxy:!0}],null,!1,3884421640),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1)])])])},gt=[],_t={data:function(){return{apiUrl:L,search:"",page:1,allCheck:!1,max:5,active:0,pageSize:15,selected:[],removing:!1,getting:!0,products:{current_page:1,results:[]},categories:[],selectedCategory:"",loading:null}},watch:{"products.current_page":{handler:function(){this.getProducts()},deep:!0},search:function(){this.getProducts()}},created:function(){var t=this;setTimeout((function(){t.loading=t.$vs.loading({target:t.$refs.loadingBox,scale:.6,type:"circles"}),t.getCategories(),t.getProducts()}),300)},mounted:function(){},methods:{getProductsWithInitialPage:function(){this.products.current_page=1,this.getProducts()},getCategories:function(){var t=this,e="api/all-categories/";q.a.get(e).then((function(e){t.categories=e.data})).catch((function(e){t.$noti.display(e,"","error","danger")}))},getProducts:function(){var t=this;if(""!==this.selectedCategory)var e="api/products/?page=".concat(this.products.current_page,"&query=").concat(this.search,"&cname=").concat(this.selectedCategory,"&page_size=").concat(this.pageSize);else e="api/products/?page=".concat(this.products.current_page,"&query=").concat(this.search,"&page_size=").concat(this.pageSize);q.a.get(e).then((function(e){var a=[];e.data.results.forEach((function(t){t.has_variant?t.variations.forEach((function(t){a.push(t)})):a.push(t)})),t.products.results=a,t.products.total_pages=e.data.total_pages,t.loading.close(),t.getting=!1})).catch((function(e){t.loading=!1,t.$noti.display(e,"","error","danger")}))}},computed:Object(o["a"])({},Object(r["c"])(["isReady"]))},bt=_t,yt=Object(g["a"])(bt,ht,gt,!1,null,null,null),Ct=yt.exports,xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"shops-list"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 header d-flex align-items-center justify-content-between"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/products"}}},[t._v("Products")]),a("el-breadcrumb-item",[t._v(t._s(t.product.name||"-"))])],1),a("div",{staticClass:"d-flex align-items-center"},[a("vs-button",{attrs:{transparent:"",danger:"",loading:t.deleting},on:{click:function(e){return t.deleteProduct()}}},[a("i",{staticClass:"bx bx-trash mr-1"}),a("span",[t._v("Delete")])]),a("vs-button",{attrs:{transparent:""},on:{click:function(e){return t.$router.go(-1)}}},[a("i",{staticClass:"bx bx-x mr-1"}),a("span",[t._v("Discard")])]),a("vs-button",{attrs:{transparent:"",loading:t.saving},on:{click:function(e){return t.Post()}}},[a("i",{staticClass:"bx bx-save mr-1"}),a("span",[t._v("Save")])])],1)],1),t.gettingProduct?t._e():a("div",{staticClass:"col-lg-8 animated fadeIn pr-lg-0 mt-base"},[a("div",{staticClass:"box mb-base"},[t._m(0),a("div",{staticClass:"divider mx-"}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("vs-input",{staticClass:"w-100",attrs:{label:"Name"},model:{value:t.product.name,callback:function(e){t.$set(t.product,"name",e)},expression:"product.name"}})],1)])]),t.product.has_variant?t._e():a("div",{staticClass:"box mb-base"},[t._m(1),a("div",{staticClass:"divider mx-"}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-6"},[a("vs-input",{staticClass:"w-100",attrs:{label:"Barcode"},model:{value:t.product.barcode,callback:function(e){t.$set(t.product,"barcode",e)},expression:"product.barcode"}})],1),a("div",{staticClass:"col-lg-6"},[a("vs-input",{staticClass:"w-100",attrs:{label:"Price"},model:{value:t.product.regular_price,callback:function(e){t.$set(t.product,"regular_price",e)},expression:"product.regular_price"}})],1)])]),t.product.has_variant?a("div",{staticClass:"box mb-base"},[t._m(2),a("div",{staticClass:"divider mx-"}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[t.product.variations.length>0?a("el-collapse",{attrs:{accordion:""}},t._l(t.product.variations,(function(e,s){return a("el-collapse-item",{key:e.name+s,attrs:{title:e.name,name:e.name}},[a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col-lg-6"},[a("vs-input",{staticClass:"w-100",attrs:{label:"Barcode"},model:{value:e.barcode,callback:function(a){t.$set(e,"barcode",a)},expression:"variation.barcode"}})],1),a("div",{staticClass:"col-lg-6"},[a("vs-input",{staticClass:"w-100",attrs:{label:"Price"},model:{value:e.regular_price,callback:function(a){t.$set(e,"regular_price",a)},expression:"variation.regular_price"}})],1)])])})),1):a("p",{staticClass:"text-center mt-base"},[t._v("No variation found!")])],1)])]):t._e()]),t.gettingProduct?t._e():a("div",{staticClass:"col-lg-4 animated fadeIn right-sidebar"},[a("div",{staticClass:"box mb-base"},[t._m(3),a("div",{staticClass:"divider mx-"}),a("div",{staticClass:"custom-input"},[a("label",{staticClass:"custom-label",attrs:{for:""}},[t._v("Category")]),a("el-select",{staticClass:"w-100",attrs:{filterable:"","allow-create":"",remote:"","reserve-keyword":"","remote-method":t.getCategories,loading:t.gettingCategories,placeholder:""},model:{value:t.product.category_name,callback:function(e){t.$set(t.product,"category_name",e)},expression:"product.category_name"}},t._l(t.categories,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.name}})})),1)],1)])])])])},wt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex justify-content-between align-items-center"},[a("p",{staticClass:"title mb-2"},[t._v("General information")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex justify-content-between align-items-center"},[a("p",{staticClass:"title mb-2"},[t._v("Pricing")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex justify-content-between align-items-center"},[a("p",{staticClass:"title mb-2"},[t._v("Variations")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex justify-content-between align-items-center"},[a("p",{staticClass:"title mb-2"},[t._v("Organization")])])}],kt=(a("b680"),a("d3b7"),a("ddb0"),{data:function(){return{saving:!1,activeNames:["1"],apiUrl:L,loading:!0,deleting:!1,categories:[],options:[{name:"Color"},{name:"Size"}],product:{name:"",barcode:"",regular_price:"",category_name:"",sale_price:"",margin:"",profit:"",cost_per_item:"",variations:[],is_main_product:!0,has_variant:!1,images:[],options:[{name:"",values:[]}]},isEditing:!1,gettingCategories:!1,gettingProduct:!0}},mounted:function(){},watch:{product:{handler:function(){this.isEditing=!0},deep:!0}},components:{},beforeMount:function(){var t=this;window.addEventListener("beforeunload",this.preventNav),this.$once("hook:beforeDestroy",(function(){window.removeEventListener("beforeunload",t.preventNav)}))},beforeRouteLeave:function(t,e,a){if(this.isEditing){var s=window.confirm("Do you really want to leave? you have unsaved changes!");s?a():a(!1)}else a()},created:function(){this.getProduct()},methods:{getProduct:function(){var t=this;q.a.get("api/product/?pid="+this.$route.params.id).then((function(e){t.product=e.data,t.product.options.forEach((function(t){t.values=JSON.parse(t.values)})),t.gettingProduct=!1,setTimeout((function(){t.isEditing=!1}),500)})).catch((function(e){t.gettingProduct=!1,t.$noti.display(e,"","error","danger")}))},deleteProduct:function(){var t=this;this.deleting=!0,q.a.delete("api/product/?pid="+this.$route.params.id).then((function(){t.deleting=!1,t.isEditing=!1,t.$router.go(-1)})).catch((function(e){t.deleting=!1,t.$noti.display(e,"","error","danger")}))},setImage:function(t,e){t.length>0?this.product.variations[e].image=t[0].image:this.product.variations[e].image=null},preventNav:function(t){this.isEditing&&(t.preventDefault(),t.returnValue="")},getCategories:function(t){var e=this;this.gettingCategories=!0,""!==t&&t||(t="Null"),q.a.get("api/search-categories/?query="+t).then((function(t){e.gettingCategories=!1,e.categories=t.data})).catch((function(t){e.gettingCategories=!1,e.$noti.display(t,"","error","danger")}))},setImages:function(t){var e=[];t.forEach((function(t){e.push({image:t.image})})),this.product.images=e},calcVariationPrice:function(t){this.product.variations[t].sale_price&&this.product.variations[t].cost_per_item?(this.product.variations[t].profit=parseInt(this.product.variations[t].sale_price-this.product.variations[t].cost_per_item),this.product.variations[t].margin=(this.product.variations[t].profit/this.product.variations[t].sale_price*100).toFixed(2)):this.product.variations[t].regular_price&&this.product.variations[t].cost_per_item?(this.product.variations[t].profit=parseInt(this.product.variations[t].regular_price-this.product.variations[t].cost_per_item),this.product.variations[t].margin=(this.product.variations[t].profit/this.product.variations[t].regular_price*100).toFixed(2)):(this.product.variations[t].margin=null,this.product.variations[t].profit=null)},calcPrice:function(){this.product.sale_price&&this.product.cost_per_item?(this.product.profit=parseInt(this.product.sale_price-this.product.cost_per_item),this.product.margin=(this.product.profit/this.product.sale_price*100).toFixed(2)):this.product.regular_price&&this.product.cost_per_item?(this.product.profit=parseInt(this.product.regular_price-this.product.cost_per_item),this.product.margin=(this.product.profit/this.product.regular_price*100).toFixed(2)):(this.product.margin=null,this.product.profit=null)},removeOption:function(t){this.product.options.splice(t,1)},addOption:function(){this.product.options.push({name:"",values:[]})},Post:function(){var t=this;this.saving=!0,this.product.options.forEach((function(t){t.values=JSON.stringify(t.values)})),q.a.put("api/product/",this.product).then((function(){t.saving=!1,t.$noti.display("Cool! Prodcut has been successfully added.","","normal","success"),t.isEditing=!1,t.$router.go(-1)})).catch((function(e){t.saving=!1,t.$noti.display(e,"","error","danger")}))}},computed:Object(o["a"])({},Object(r["c"])(["isReady"]))}),St=kt,Pt=Object(g["a"])(St,xt,wt,!1,null,null,null),$t=Pt.exports,It=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"shops-list"},[a("div",{staticClass:"row mb-base"},[a("div",{staticClass:"col-12 header d-flex align-items-center justify-content-between"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/products"}}},[t._v("Products")]),a("el-breadcrumb-item",[t._v("Create new product")])],1),a("div",{staticClass:"d-flex align-items-center"},[a("vs-button",{attrs:{transparent:""},on:{click:function(e){return t.$router.go(-1)}}},[a("i",{staticClass:"bx bx-x mr-1"}),a("span",[t._v("Discard")])]),a("vs-button",{attrs:{transparent:"",loading:t.saving},on:{click:function(e){return t.Post()}}},[a("i",{staticClass:"bx bx-save mr-1"}),a("span",[t._v("Save")])])],1)],1),a("div",{staticClass:"col-lg-8 pr-lg-0 mt-base"},[a("div",{staticClass:"box mb-base"},[t._m(0),a("div",{staticClass:"divider mx-"}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("vs-input",{staticClass:"w-100",attrs:{label:"Name"},model:{value:t.product.name,callback:function(e){t.$set(t.product,"name",e)},expression:"product.name"}})],1),a("div",{staticClass:"col-12 mt-2"},[a("vs-checkbox",{model:{value:t.product.has_variant,callback:function(e){t.$set(t.product,"has_variant",e)},expression:"product.has_variant"}},[t._v(" This product has multi options, like different size and color. ")])],1)])]),t.product.has_variant?t._e():a("div",{staticClass:"box"},[t._m(1),a("div",{staticClass:"divider mx-"}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-6"},[a("vs-input",{staticClass:"w-100",attrs:{label:"Barcode"},model:{value:t.product.barcode,callback:function(e){t.$set(t.product,"barcode",e)},expression:"product.barcode"}})],1),a("div",{staticClass:"col-lg-6"},[a("vs-input",{staticClass:"w-100",attrs:{label:"Price"},model:{value:t.product.regular_price,callback:function(e){t.$set(t.product,"regular_price",e)},expression:"product.regular_price"}})],1)])]),t.product.has_variant?a("div",{staticClass:"box mb-base"},[a("div",{staticClass:"d-flex justify-content-between align-items-center"},[a("p",{staticClass:"title mb-2"},[t._v("Options")]),a("p",{staticClass:"primary mb-2 pointer",on:{click:t.addOption}},[t._v(" Add "+t._s(t.product.options.length>0?"another":"an")+" option ")])]),a("div",{staticClass:"divider mx-"}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},t._l(t.product.options,(function(e,s){return a("div",{key:s,staticClass:"row mt-1 pt-1",class:s!==t.product.options.length-1&&" mb-3"},[a("div",{staticClass:"col-4"},[a("label",{staticClass:"custom-label md-text",attrs:{for:""}},[t._v("Name")]),a("el-select",{staticClass:"w-100",attrs:{filterable:"","allow-create":"",placeholder:"select or create new"},model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"option.name"}},t._l(t.options,(function(t){return a("el-option",{key:t.name,attrs:{label:t.name,value:t.name}})})),1)],1),a("div",{staticClass:"col-8"},[a("div",{staticClass:"d-flex justify-content-between align-items-end"},[a("div",{staticClass:"w-100"},[a("label",{staticClass:"custom-label md-text",attrs:{for:"values"}},[t._v("Values")]),a("input-tag",{attrs:{name:"values"},model:{value:e.values,callback:function(a){t.$set(e,"values",a)},expression:"option.values"}})],1),a("vs-button",{staticClass:"ml-2 mb-1",attrs:{danger:"",transparent:"",icon:""},on:{click:function(e){return t.removeOption(s)}}},[a("i",{staticClass:"bx bx-x"})])],1)])])})),0)])]):t._e(),t.product.has_variant?a("div",{staticClass:"box mb-base"},[t._m(2),a("div",{staticClass:"divider mx-"}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[t.product.variations.length>0?a("el-collapse",{attrs:{accordion:""}},t._l(t.product.variations,(function(e,s){return a("el-collapse-item",{key:e.name+s,attrs:{title:e.name,name:e.name}},[a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col-lg-6"},[a("vs-input",{staticClass:"w-100",attrs:{label:"Barcode"},model:{value:e.barcode,callback:function(a){t.$set(e,"barcode",a)},expression:"variation.barcode"}})],1),a("div",{staticClass:"col-lg-6"},[a("vs-input",{staticClass:"w-100",attrs:{label:"Price"},model:{value:e.regular_price,callback:function(a){t.$set(e,"regular_price",a)},expression:"variation.regular_price"}})],1)])])})),1):a("div",{staticClass:"d-flex align-items-center justify-content-center"},[a("div",{staticClass:"my-2"},[a("img",{attrs:{src:"http://localhost:3000/image/noEvent.png",width:"150px",alt:""}}),a("p",{staticStyle:{color:"rgba(var(--vs-text), 0.7)"}},[t._v(" No variation found! ")])])])],1)])]):t._e()]),a("div",{staticClass:"col-lg-4 right-sidebar"},[a("div",{staticClass:"box"},[t._m(3),a("div",{staticClass:"divider mx-"}),a("div",{staticClass:"custom-input"},[a("label",{staticClass:"custom-label",attrs:{for:""}},[t._v("Category")]),a("el-select",{staticClass:"w-100",attrs:{filterable:"","allow-create":"",remote:"","reserve-keyword":"","remote-method":t.getCategories,loading:t.gettingCategories,placeholder:""},model:{value:t.product.category_name,callback:function(e){t.$set(t.product,"category_name",e)},expression:"product.category_name"}},t._l(t.categories,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.name}})})),1)],1)])])])])},jt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex justify-content-between align-items-center"},[a("p",{staticClass:"title mb-2"},[t._v("General information")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex justify-content-between align-items-center"},[a("p",{staticClass:"title mb-2"},[t._v("Pricing")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex justify-content-between align-items-center"},[a("p",{staticClass:"title mb-2"},[t._v("Variations")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex justify-content-between align-items-center"},[a("p",{staticClass:"title mb-2"},[t._v("Organization")])])}],Dt=(a("25f0"),a("5319"),{data:function(){return{saving:!1,activeNames:["1"],apiUrl:L,loading:!0,categories:[],options:[{name:"Color"},{name:"Size"}],product:{name:"",barcode:"",regular_price:"",category_name:"",sale_price:"",margin:"",profit:"",cost_per_item:"",variations:[],is_main_product:!0,has_variant:!1,images:[],options:[{name:"",values:[]}]},watchingOption:!0,isEditing:!1,gettingCategories:!1}},mounted:function(){},watch:{"product.options":{handler:function(t){this.watchingOption&&this.onChangeTag(t)},deep:!0},product:{handler:function(){this.isEditing=!0},deep:!0}},components:{},beforeMount:function(){var t=this;window.addEventListener("beforeunload",this.preventNav),this.$once("hook:beforeDestroy",(function(){window.removeEventListener("beforeunload",t.preventNav)}))},beforeRouteLeave:function(t,e,a){if(this.isEditing){var s=window.confirm("Do you really want to leave? you have unsaved changes!");s?a():a(!1)}else a()},created:function(){},methods:{setImage:function(t,e){t.length>0&&(this.product.variations[e].image=t[0].image)},preventNav:function(t){this.isEditing&&(t.preventDefault(),t.returnValue="")},getCategories:function(t){var e=this;this.gettingCategories=!0,""!==t&&t||(t="Null"),q.a.get("api/search-categories/?query="+t).then((function(t){e.gettingCategories=!1,e.categories=t.data})).catch((function(t){e.gettingCategories=!1,e.$noti.display(t,"","error","danger")}))},setImages:function(t){var e=[];t.forEach((function(t){e.push({image:t.image})})),this.product.images=e},calcVariationPrice:function(t){this.product.variations[t].sale_price&&this.product.variations[t].cost_per_item?(this.product.variations[t].profit=parseInt(this.product.variations[t].sale_price-this.product.variations[t].cost_per_item),this.product.variations[t].margin=(this.product.variations[t].profit/this.product.variations[t].sale_price*100).toFixed(2)):this.product.variations[t].regular_price&&this.product.variations[t].cost_per_item?(this.product.variations[t].profit=parseInt(this.product.variations[t].regular_price-this.product.variations[t].cost_per_item),this.product.variations[t].margin=(this.product.variations[t].profit/this.product.variations[t].regular_price*100).toFixed(2)):(this.product.variations[t].margin=null,this.product.variations[t].profit=null)},calcPrice:function(){this.product.sale_price&&this.product.cost_per_item?(this.product.profit=parseInt(this.product.sale_price-this.product.cost_per_item),this.product.margin=(this.product.profit/this.product.sale_price*100).toFixed(2)):this.product.regular_price&&this.product.cost_per_item?(this.product.profit=parseInt(this.product.regular_price-this.product.cost_per_item),this.product.margin=(this.product.profit/this.product.regular_price*100).toFixed(2)):(this.product.margin=null,this.product.profit=null)},removeOption:function(t){this.product.options.splice(t,1)},addOption:function(){this.product.options.push({name:"",values:[]})},onChangeTag:function(t){var e=[];t.forEach((function(t){e.push(t.values)}));var a=this.combineOptions(e),s=[];a.forEach((function(t){var e={name:"",barcode:"",regular_price:"",sale_price:"",margin:"",profit:"",cost_per_item:"",image:null};e.name=t.replace(/,/g," / "),s.push(e)})),this.product.variations=s},combineOptions:function(t){var e=[],a=t.length-1;function s(i,n){for(var o=0,r=t[n].length;o<r;o++){var c=i.slice(0);c.push(t[n][o]),n==a?e.push(c.toString()):s(c,n+1)}}return s([],0),e},Post:function(){var t=this;this.saving=!0,this.watchingOption=!1,this.product.options.forEach((function(t){t.values=JSON.stringify(t.values)})),q.a.post("api/product/",this.product).then((function(){t.saving=!1,t.$noti.display("Cool! Prodcut has been successfully added.","","normal","success"),t.isEditing=!1,t.$router.go(-1)})).catch((function(e){t.watchingOption=!0,t.saving=!1,t.$noti.display(e,"","error","danger")}))}},computed:Object(o["a"])({},Object(r["c"])(["isReady"]))}),Et=Dt,Tt=(a("0f2c"),Object(g["a"])(Et,It,jt,!1,null,null,null)),Ot=Tt.exports,Nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"products"},[a("div",{staticClass:"row mb-base"},[t._m(0),a("div",{staticClass:"w-100 position-absolute",staticStyle:{height:"100vh"}},[a("div",{ref:"loadingBox",staticClass:"route-loading"})]),t.getting?t._e():a("div",{staticClass:"col-12 mt-base animated fadeIn"},[a("div",{staticClass:"box pt-3"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 mb-3 d-flex align-items-center justify-content-between"},[a("div",{staticClass:"d-flex justify-content-between align-items-center"},[a("vs-select",{staticClass:"page-size-selector",on:{change:t.getProducts},model:{value:t.pageSize,callback:function(e){t.pageSize=e},expression:"pageSize"}},t._l(10,(function(e){return a("vs-option",{key:e,attrs:{label:5*e,value:5*e}},[t._v(" "+t._s(5*e)+" ")])})),1),a("vs-input",{attrs:{placeholder:"Search anything here"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("div",{},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",placeholder:"search by date",type:"date"},on:{change:t.getProductsWithInitialPage},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)])]),a("vs-table",{scopedSlots:t._u([{key:"thead",fn:function(){return[a("vs-tr",[a("vs-th",{staticStyle:{width:"10% !important"}},[t._v(" Date")]),a("vs-th",{staticStyle:{width:"10% !important"}},[t._v(" Sale No.")]),a("vs-th",{staticStyle:{width:"30% !important"}},[t._v(" Name")]),a("vs-th",[t._v(" Quantity")]),a("vs-th",[t._v(" Price")]),a("vs-th",[t._v(" Subtotal")])],1)]},proxy:!0},{key:"tbody",fn:function(){return t._l(t.products.results,(function(e,s){return a("vs-tr",{key:s,staticClass:"animated fadeIn",style:"animation-delay: "+45*s+"ms",attrs:{data:e,"open-expand-only-td":""}},[a("vs-td",[t._v(" "+t._s(t.$moment(e.date).format("DD-MM-YYYY"))+" ")]),a("vs-td",[t._v(" "+t._s(e.sale)+" ")]),a("vs-td",[t._v(" "+t._s(e.name)+" ")]),a("vs-td",[t._v(" "+t._s(e.quantity)+" ")]),a("vs-td",[t._v(" "+t._s(e.price_per_item)+" Ks ")]),a("vs-td",[t._v(" "+t._s(e.subtotal)+" Ks ")])],1)}))},proxy:!0},{key:"notFound",fn:function(){return[a("div",{staticClass:"d-flex align-items-center justify-content-center",staticStyle:{height:"53vh"}},[a("div",[a("img",{attrs:{src:"image/noEvent.png",width:"150px",alt:""}}),a("p",{staticStyle:{color:"rgba(var(--vs-text), 0.7)"}},[t._v("No data found!")])])])]},proxy:!0},{key:"footer",fn:function(){return[a("vs-pagination",{attrs:{length:t.products.total_pages},model:{value:t.products.current_page,callback:function(e){t.$set(t.products,"current_page",e)},expression:"products.current_page"}})]},proxy:!0}],null,!1,4010034979),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1)])])])},At=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-12 pt-3 header d-flex align-items-center justify-content-between"},[a("p",{staticStyle:{"margin-bottom":"14px"}},[t._v("Sale products")]),a("div",{staticClass:"d-flex align-items-center"})])}],Lt={data:function(){return{apiUrl:L,search:"",page:1,allCheck:!1,max:5,active:0,selected:[],removing:!1,getting:!0,products:{current_page:1,results:[],total_pages:0},date:"",categories:[],selectedCategory:"",pageSize:15,loading:null}},watch:{"products.current_page":{handler:function(){this.getProducts()},deep:!0},search:function(){this.getProducts()}},created:function(){var t=this;this.date=this.$moment().format("YYYY-MM-DD"),setTimeout((function(){t.loading=t.$vs.loading({target:t.$refs.loadingBox,scale:.6,type:"circles"}),t.getProducts()}),300)},mounted:function(){},methods:{getProductsWithInitialPage:function(){this.products.current_page=1,this.getProducts()},getProducts:function(){var t=this;null==this.date&&(this.date="");var e="api/sale-products/?page=".concat(this.products.current_page,"&page_size=").concat(this.pageSize,"&query=").concat(this.search,"&date=").concat(this.date);q.a.get(e).then((function(e){t.loading.close(),t.products.results=e.data.results,t.products.total_pages=e.data.total_pages,t.getting=!1})).catch((function(e){t.loading=!1,t.$noti.display(e,"","error","danger")}))}},computed:Object(o["a"])({},Object(r["c"])(["isReady"]))},Mt=Lt,zt=Object(g["a"])(Mt,Nt,At,!1,null,null,null),Ut=zt.exports,qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"roles"},[a("div",{staticClass:"row mb-base"},[a("div",{staticClass:"col-12 header d-flex align-items-center justify-content-between"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/sales"}}},[t._v("Sales")])],1),a("div",{staticClass:"d-flex align-items-center"},[a("vs-button",{attrs:{transparent:""},on:{click:function(e){t.activeImport=!0}}},[a("i",{staticClass:"bx bx-download mr-1"}),t._v("Import ")]),a("vs-button",{attrs:{transparent:"",to:"/create-new-sale"}},[a("i",{staticClass:"bx bx-plus mr-1"}),t._v("Create new sale ")])],1)],1),a("div",{staticClass:"w-100 position-absolute",staticStyle:{height:"100vh"}},[a("div",{ref:"loadingBox",staticClass:"route-loading"})]),t.getting?t._e():a("div",{staticClass:"col-12 mt-base animated fadeIn"},[a("div",{staticClass:"box pt-3"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 mb-3 d-flex align-items-center justify-content-between"},[a("div",{staticClass:"d-flex justify-content-between align-items-center"},[a("vs-select",{staticClass:"page-size-selector",on:{change:t.getSales},model:{value:t.pageSize,callback:function(e){t.pageSize=e},expression:"pageSize"}},t._l(10,(function(e){return a("vs-option",{key:e,attrs:{label:5*e,value:5*e}},[t._v(" "+t._s(5*e)+" ")])})),1),a("vs-input",{attrs:{placeholder:"Search anything here"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("div",{staticClass:"d-flex align-items-center justify-content-end"},[a("div",{staticClass:"mr-3"},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"search by fulfilled"},on:{change:t.getSalesWithInitialPage},model:{value:t.is_fullfilled,callback:function(e){t.is_fullfilled=e},expression:"is_fullfilled"}},[a("el-option",{attrs:{label:"Fulfilled",value:!0}}),a("el-option",{attrs:{label:"Not fulfilled",value:!1}})],1)],1),a("div",{staticClass:"mr-3"},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"search by payment"},on:{change:t.getSalesWithInitialPage},model:{value:t.payment_status,callback:function(e){t.payment_status=e},expression:"payment_status"}},[a("el-option",{attrs:{label:"Paid",value:"Paid"}}),a("el-option",{attrs:{label:"Unpaid",value:"Unpaid"}}),a("el-option",{attrs:{label:"Partially Paid",value:"Partially Paid"}})],1)],1),a("div",{},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",placeholder:"search by date",type:"date"},on:{change:t.getSalesWithInitialPage},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)])])]),a("vs-table",{scopedSlots:t._u([{key:"header",fn:function(){},proxy:!0},{key:"thead",fn:function(){return[a("vs-tr",[a("vs-th",{staticStyle:{width:"10% !important"}},[t._v(" Sale no.")]),a("vs-th",{staticStyle:{"min-width":"25% !important"}},[t._v(" Customer Name")]),a("vs-th",{staticStyle:{width:"10% !important"}},[t._v(" Date")]),a("vs-th",{staticStyle:{width:"15% !important"}},[t._v(" Total Price")]),a("vs-th",{staticStyle:{width:"15% !important"}},[t._v(" Payment Status")]),a("vs-th",{staticStyle:{width:"15% !important"}},[t._v("Get Voucher")]),a("vs-th",{staticStyle:{width:"15% !important"}},[t._v(" Fulfilled")])],1)]},proxy:!0},{key:"tbody",fn:function(){return t._l(t.sales.results,(function(e,s){return a("vs-tr",{key:s,staticClass:"animated fadeIn",style:"animation-delay: "+45*s+"ms",attrs:{data:e,"is-selected":!!t.selected.includes(e),"not-click-selected":"","open-expand-only-td":""}},[a("vs-td",{on:{click:function(a){return t.$router.push({name:"Sale",params:{id:e.id}})}}},[t._v(" "+t._s(e.sale_no||"-")+" ")]),a("vs-td",{on:{click:function(a){return t.$router.push({name:"Sale",params:{id:e.id}})}}},[t._v(" "+t._s(e.customer_name||"-")+" ")]),a("vs-td",{on:{click:function(a){return t.$router.push({name:"Sale",params:{id:e.id}})}}},[t._v(" "+t._s(t.$moment(e.date).format("DD-MM-YYYY"))+" ")]),a("vs-td",{on:{click:function(a){return t.$router.push({name:"Sale",params:{id:e.id}})}}},[t._v(" "+t._s(e.total)+" Ks ")]),a("vs-td",{on:{click:function(a){return t.$router.push({name:"Sale",params:{id:e.id}})}}},[a("div",{staticClass:"d-flex align-items-center"},["Unpaid"===e.payment_status?a("div",{staticClass:"status_ danger-bg sm-text"},[t._v(" "+t._s(e.payment_status)+" ")]):t._e(),"Partially Paid"===e.payment_status?a("div",{staticClass:"status_ warning-bg sm-text"},[t._v(" "+t._s(e.payment_status)+" ")]):t._e(),"Paid"===e.payment_status?a("div",{staticClass:"status_ sm-text success-bg"},[t._v(" "+t._s(e.payment_status)+" ")]):t._e()])]),a("vs-td",{on:{click:function(a){return t.$router.push({name:"Sale",params:{id:e.id}})}}},[a("div",{staticClass:"d-flex align-items-center"},[e.get_voucher?a("div",{staticClass:"status_ success-bg sm-text"},[t._v(" Getted voucher ")]):a("div",{staticClass:"status_ warning-bg sm-text"},[t._v(" Not get yet ")])])]),a("vs-td",{on:{click:function(a){return t.$router.push({name:"Sale",params:{id:e.id}})}}},[a("div",{staticClass:"d-flex align-items-center"},[e.is_fullfilled?t._e():a("div",{staticClass:"status_ warning-bg sm-text"},[t._v(" No ")]),e.is_fullfilled?a("div",{staticClass:"status_ success-bg sm-text"},[t._v(" Yes ")]):t._e()])])],1)}))},proxy:!0},{key:"notFound",fn:function(){return[a("div",{staticClass:"d-flex align-items-center justify-content-center",staticStyle:{height:"53vh"}},[a("div",[a("img",{attrs:{src:"image/noEvent.png",width:"150px",alt:""}}),a("p",{staticStyle:{color:"rgba(var(--vs-text), 0.7)"}},[t._v("No data found!")])])])]},proxy:!0},{key:"footer",fn:function(){return[a("vs-pagination",{attrs:{length:t.sales.total_pages},model:{value:t.sales.current_page,callback:function(e){t.$set(t.sales,"current_page",e)},expression:"sales.current_page"}})]},proxy:!0}],null,!1,1390163292),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1)])]),a("vs-dialog",{attrs:{"not-close":"",blur:"",id:"import-product"},scopedSlots:t._u([{key:"header",fn:function(){return[a("p",{staticClass:"my-0 font-weight-bold"},[t._v("Import Sale")])]},proxy:!0},{key:"footer",fn:function(){return[a("div",{staticClass:"footer-dialog d-flex justify-content-between align-items-center mt-3"},[a("vs-button",{staticClass:"ml-0 mr-2 w-100",attrs:{size:"large",flat:""},on:{click:function(e){t.activeImport=!1}}},[t._v(" Cancel ")]),a("vs-button",{staticClass:"mr-0 ml-2 w-100",attrs:{loading:t.importing,size:"large"},on:{click:t.importSale}},[t._v(" Import ")])],1)]},proxy:!0}]),model:{value:t.activeImport,callback:function(e){t.activeImport=e},expression:"activeImport"}},[a("div",{staticClass:"divider mt-0 mb-3 mx-"}),a("div",{staticClass:"con-form"},[t.selectedFileName?a("div",{staticClass:"file-uploader d-flex justify-content-center align-items-center",staticStyle:{width:"100%"}},[a("span",{staticClass:"remove-json pointer",on:{click:function(e){t.selectedFileName=null}}},[a("i",{staticClass:"bx bx-x"})]),a("p",{staticClass:"primary-text"},[t._v(t._s(t.selectedFileName))])]):a("div",{staticClass:"file-uploader d-flex justify-content-center align-items-center",staticStyle:{width:"100%"}},[a("input",{ref:"fileInput",staticClass:"uploader-file-input pointer",attrs:{type:"file",name:""},on:{change:t.onFileChange}}),a("div",{staticClass:"flex-column d-flex justify-content-center align-items-center"},[a("p",{staticClass:"gray mb-2"},[t._v("Drag json file here to upload Or")]),a("vs-button",{on:{click:function(e){return t.$refs.fileInput.click()}}},[t._v("Add json file")])],1)])])])],1)},Ft=[],Bt=(a("13d5"),a("1276"),{data:function(){return{apiUrl:L,search:"",page:1,allCheck:!1,importing:!1,activeImport:!1,max:5,active:0,pageSize:15,getting:!0,is_fullfilled:"",payment_status:"",date:"",selected:[],removing:!1,sales:{current_page:1,results:[]},query:"",selectedFileName:null,saleData:null,loading:null}},watch:{"sales.current_page":{handler:function(){this.getSales()},deep:!0},search:function(){this.getSalesWithInitialPage2()}},created:function(){var t=this;setTimeout((function(){t.loading=t.$vs.loading({target:t.$refs.loadingBox,scale:.6,type:"circles"}),t.getSales()}),300)},mounted:function(){},methods:{importSale:function(){var t=this;this.importing=!0,q.a.post("api/sale-export/",this.saleData).then((function(e){t.importing=!1,t.$noti.display("Cool! Sale has been successfully added.","","normal","success"),t.isEditing=!1,t.activeImport=!1,t.$router.push({name:"Sale",params:{id:e.data.id}})})).catch((function(e){t.importing=!1,t.$noti.display(e,"","error","danger")}))},onFileChange:function(t){var e=this,a=t.target.value.split(".")[1];if("json"!==a)return alert("The file uploaded need to be Json format!"),!1;var s=t.target.files[0];this.selectedFileName=s.name;var i=new FileReader;i.onload=function(t){var a=t.target.result;e.saleData=JSON.parse(a)},i.readAsText(s)},getTotalPrice:function(t){return t.reduce((function(t,e){return t+parseInt(e.subtotal)}),0)},getSalesWithInitialPage:function(){this.sales.current_page=1,this.getSales()},getSalesWithInitialPage2:function(){this.sales.current_page=1,this.date="",this.status="",this.payment_status="",this.search||(this.date=this.$moment().format("YYYY-MM-DD")),this.getSales()},getSales:function(){var t=this;null===this.date&&(this.date=""),null===this.is_fullfilled&&(this.is_fullfilled=""),null===this.payment_status&&(this.payment_status="");var e="api/sales/?page=".concat(this.sales.current_page,"&query=").concat(this.search,"&date=").concat(this.date,"&is_fullfilled=").concat(this.is_fullfilled,"&payment_status=").concat(this.payment_status,"&page_size=").concat(this.pageSize);q.a.get(e).then((function(e){t.sales.results=e.data.results,t.sales.total_pages=e.data.total_pages,t.loading.close(),t.getting=!1})).catch((function(e){t.loading=!1,t.$noti.display(e,"","error","danger")}))}},computed:Object(o["a"])({},Object(r["c"])(["isReady"]))}),Rt=Bt,Yt=(a("7124"),Object(g["a"])(Rt,qt,Ft,!1,null,null,null)),Kt=Yt.exports,Vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sale"},[a("div",{ref:"routeView",staticClass:"row"},[a("div",{staticClass:"col-12 header d-flex flex-column"},[a("div",{staticClass:"w-100 d-flex align-items-center justify-content-between"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/sales"}}},[t._v("Sales")]),a("el-breadcrumb-item",[t._v(t._s(t.sale.sale_no||"-"))])],1),a("div",{staticClass:"d-flex align-items-center"},[a("vs-button",{attrs:{transparent:"",loading:t.exporting},on:{click:t.exportSale}},[a("i",{staticClass:"bx bx-upload mr-1"}),t._v("Export ")]),a("vs-button",{attrs:{transparent:"",loading:t.printing},on:{click:t.salePrint}},[a("i",{staticClass:"bx bx-printer mr-1"}),a("span",[t._v("Print")])]),a("vs-button",{attrs:{transparent:""},on:{click:function(e){return t.$router.go(-1)}}},[a("i",{staticClass:"bx bx-x mr-1"}),a("span",[t._v("Discard")])]),a("vs-button",{attrs:{transparent:"",loading:t.saving},on:{click:function(e){return t.Post()}}},[a("i",{staticClass:"bx bx-save mr-1"}),a("span",[t._v("Save")])])],1)],1),a("div",{staticClass:"w-100"},[a("el-select",{staticClass:"w-100 d-block header-search-bar",attrs:{filterable:"",remote:"",clearable:"","reserve-keyword":"",placeholder:"Please enter product's name or barcode","remote-method":t.getProducts,loading:t.gettingProducts},on:{change:t.addProduct},model:{value:t.selectedProduct,callback:function(e){t.selectedProduct=e},expression:"selectedProduct"}},t._l(t.products,(function(t,e){return a("el-option",{key:t.name+e,attrs:{label:t.is_main_product?t.name:t.product_name+" - "+t.name,value:t.name+"_"+t.id}})})),1)],1)]),a("div",{staticClass:"w-100 position-absolute",staticStyle:{height:"100vh"}},[a("div",{ref:"loadingBox",staticClass:"route-loading"})]),t.gettingSale?t._e():a("div",{staticClass:"col-lg-8 pr-lg-0 mt-base animated fadeIn"},[a("div",{staticClass:"box mb-base"},[a("div",{staticClass:"d-flex justify-content-between align-items-center"},[a("div",{staticClass:"d-flex justify-content-between align-items-center"},[a("p",{staticClass:"title mr-3 mb-2"},[t._v("Products")]),t.sale.is_fullfilled?t._e():a("div",{staticClass:"status_ warning-bg sm-text"},[t._v(" Not fullfilled ")]),t.sale.is_fullfilled?a("div",{staticClass:"status_ sm-text success-bg"},[t._v(" Fullfilled ")]):t._e()]),a("div",{staticClass:"d-flex justify-content-end align-items-center"},[a("p",{staticClass:"primary mb-2 pointer mr-3",on:{click:t.addCustomProduct}},[t._v(" Add custom product ")]),a("p",{staticClass:"primary mb-2 pointer",on:{click:t.updatePrice}},[t._v(" Update product's price ")])])]),a("div",{staticClass:"divider mx-"}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"custom-input"},[a("label",{staticClass:"custom-label",attrs:{for:""}},[t._v("Select product")]),a("el-select",{staticClass:"w-100",attrs:{filterable:"",remote:"",clearable:"","reserve-keyword":"",placeholder:"Please enter product's name or barcode","remote-method":t.getProducts,loading:t.gettingProducts},on:{change:t.addProduct},model:{value:t.selectedProduct,callback:function(e){t.selectedProduct=e},expression:"selectedProduct"}},t._l(t.products,(function(t,e){return a("el-option",{key:t.name+e,attrs:{label:t.is_main_product?t.name:t.product_name+" - "+t.name,value:t.name+"_"+t.id}})})),1)],1)]),a("div",{staticClass:"col-12 mt-base"},[a("vs-table",{staticClass:"start-with-date",scopedSlots:t._u([{key:"thead",fn:function(){return[a("vs-tr",[a("vs-th",{staticStyle:{width:"20% !important"}},[t._v("Added Date ")]),a("vs-th",[t._v(" Name ")]),a("vs-th",{staticStyle:{width:"2% !important"}},[t._v(" Fullfilled ")]),a("vs-th",{staticStyle:{width:"2% !important"}},[t._v(" Quantity ")]),a("vs-th",{staticStyle:{width:"12% !important"}},[t._v(" Price ")]),a("vs-th",{staticStyle:{width:"12% !important"}},[t._v(" Subtotal ")]),a("vs-th",{staticStyle:{width:"3% !important"}})],1)]},proxy:!0},{key:"tbody",fn:function(){return t._l(t.sale.products,(function(e,s){return a("vs-tr",{key:s,attrs:{data:e,id:"product-"+s}},[a("vs-td",{},[a("el-date-picker",{staticClass:"w-100",attrs:{type:"date",format:"dd-MM-yyyy",placeholder:"Pick a date"},model:{value:e.date,callback:function(a){t.$set(e,"date",a)},expression:"tr.date"}})],1),e.is_custom_product?a("vs-td",[a("vs-input",{staticClass:"w-100",model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"tr.name"}})],1):a("vs-td",[t._v(" "+t._s(e.name)+" ")]),a("vs-td",[a("vs-input",{staticClass:"w-100",attrs:{type:"number"},on:{change:t.checkFulfill},model:{value:e.number_of_fullfilled,callback:function(a){t.$set(e,"number_of_fullfilled",a)},expression:"tr.number_of_fullfilled"}})],1),a("vs-td",[a("vs-input",{staticClass:"w-100",attrs:{type:"number"},on:{change:function(e){return t.changeQuantity(s)}},model:{value:e.quantity,callback:function(a){t.$set(e,"quantity",a)},expression:"tr.quantity"}})],1),a("vs-td",[a("vs-input",{staticClass:"w-100",attrs:{type:"number"},on:{change:function(e){return t.changeQuantity(s)}},model:{value:e.price_per_item,callback:function(a){t.$set(e,"price_per_item",a)},expression:"tr.price_per_item"}})],1),a("vs-td",[t._v(" "+t._s(e.subtotal)+" Ks ")]),a("vs-td",[a("vs-button",{staticClass:"m-0",attrs:{transparent:"",icon:"",danger:""},on:{click:function(a){return t.removeProduct(e,s)}}},[a("i",{staticClass:"bx bx-x"})])],1)],1)}))},proxy:!0},{key:"notFound",fn:function(){return[a("div",{staticClass:"d-flex align-items-center justify-content-center"},[a("div",{staticClass:"my-2"},[a("img",{attrs:{src:"http://localhost:3000/image/noEvent.png",width:"150px",alt:""}}),a("p",{staticStyle:{color:"rgba(var(--vs-text), 0.7)"}},[t._v(" No data found! ")])])])]},proxy:!0}],null,!1,2545593195),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1)])]),a("div",{staticClass:"box mb-base"},[t._m(0),a("div",{staticClass:"divider mx-"}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"d-flex justify-content-between align-items-center"},[a("vs-tooltip",{attrs:{bottom:"",shadow:"","not-hover":""},scopedSlots:t._u([{key:"tooltip",fn:function(){return[a("div",{staticClass:"content-tooltip mt-3"},[a("div",{staticClass:"w-100",staticStyle:{display:"flex","align-items":"flex-start","justify-content":"flex-start"}},[a("label",{staticClass:"custom-label md-text"},[t._v("Discount this sale by")])]),a("div",{staticClass:"d-flex justify-content-between align-items-center"},[a("div",{staticClass:"d-flex justify-content-center align-items-center"},[a("vs-button",{staticClass:"ml-0",attrs:{icon:"",flat:""},on:{click:function(e){t.sale.discount_type="Ks"}}},[a("p",{staticClass:"d-flex mb-0 align-items-center justify-content-center",staticStyle:{width:"20px",height:"20px"}},[t._v(" Ks ")])]),a("vs-button",{attrs:{icon:"",flat:""},on:{click:function(e){t.sale.discount_type="%"}}},[a("p",{staticClass:"d-flex mb-0 align-items-center justify-content-center",staticStyle:{width:"20px",height:"20px"}},[t._v(" % ")])])],1),a("div",{staticClass:"row"},[a("div",{staticClass:"col-9"},[a("vs-input",{staticClass:"ml-2 w-100",model:{value:t.discount,callback:function(e){t.discount=e},expression:"discount"}})],1),a("div",{staticClass:"col-3 p-0 d-flex align-items-center justify-content-center"},[a("p",{staticClass:"my-0",staticStyle:{width:"15px","margin-left":"-15px"}},[t._v(" "+t._s(t.sale.discount_type)+" ")])])])]),a("vs-input",{staticClass:"w-100",attrs:{label:"Reason"},model:{value:t.sale.discount_reason,callback:function(e){t.$set(t.sale,"discount_reason",e)},expression:"sale.discount_reason"}}),a("footer",{staticClass:"mt-3 my-1 d-flex justify-content-between align-items-center"},[a("vs-button",{staticClass:"ml-0 mr-3",attrs:{size:"large",flat:"",block:""},on:{click:function(e){t.activeTooltip=!1}}},[t._v(" Cancel ")]),a("vs-button",{staticClass:"m-0",attrs:{block:""},on:{click:t.calcuDiscount}},[t._v(" Apply ")])],1)],1)]},proxy:!0}],null,!1,3257096103),model:{value:t.activeTooltip,callback:function(e){t.activeTooltip=e},expression:"activeTooltip"}},[a("p",{staticClass:"primary my-1 pointer",on:{click:function(e){t.activeTooltip=!t.activeTooltip}}},[t._v(" Add discount ")])]),a("div",[a("p",{staticClass:"mb-0 text-right"},[t._v(" "+t._s(0===parseInt(t.sale.discount)?"-":"-"+t.sale.discount)+" Ks ")]),a("p",{staticClass:"sm-text m-0"},[t._v(t._s(t.sale.discount_reason))])])],1),a("div",{staticClass:"divider"}),a("div",{staticClass:"d-flex justify-content-between align-items-center mt-2"},[a("p",{staticClass:"my-1"},[t._v("Subtotal")]),a("p",{staticClass:"my-1"},[t._v(" "+t._s(0===parseInt(t.sale.subtotal)?"-":t.sale.subtotal)+" Ks ")])]),a("div",{staticClass:"divider"}),a("div",{staticClass:"d-flex justify-content-between align-items-center mt-2"},[a("p",{staticClass:"my-1"},[t._v("Total")]),a("p",{staticClass:"my-1"},[t._v(" "+t._s(0===parseInt(t.sale.total)?"-":t.sale.total)+" Ks ")])])])])])])]),a("div",{staticClass:"box mb-base"},[a("div",{staticClass:"d-flex justify-content-between align-items-center"},[a("p",{staticClass:"title mb-2"},[t._v("Payments History")]),a("p",{staticClass:"primary mb-2 pointer",on:{click:function(e){t.activePayment=!t.activePayment}}},[t._v(" Add payment ")])]),a("div",{staticClass:"mx- divider"}),t._l(t.sale.payments,(function(e,s){return a("div",{key:e.id,staticClass:"w-100"},[a("div",{staticClass:"d-flex justify-content-between align-items-center mt-2"},[a("p",{staticClass:"my-1"},[t._v(" Paid on "+t._s(e.date)+" ")]),a("p",{staticClass:"my-1"},[t._v(t._s(e.amount)+" Ks")])]),s!==t.sale.payments.length-1?a("div",{staticClass:"divider"}):t._e()])})),a("div",{staticClass:"divider"}),a("div",{staticClass:"d-flex justify-content-between align-items-center mt-2"},[a("p",{staticClass:"my-1"},[t._v("Total Paid")]),a("p",{staticClass:"my-1"},[t._v(" "+t._s(0===parseInt(t.sale.paid_amount)?"-":t.sale.paid_amount)+" Ks ")])]),a("div",{staticClass:"divider"}),a("div",{staticClass:"d-flex justify-content-between align-items-center mt-2"},[a("p",{staticClass:"my-1"},[t._v("Due amount")]),a("p",{staticClass:"my-1"},[t._v(t._s(t.sale.due_amount)+" Ks")])])],2)]),t.gettingSale?t._e():a("div",{staticClass:"col-lg-4 right-sidebar animated fadeIn"},[a("div",{staticClass:"box mb-base"},[t._m(1),a("div",{staticClass:"divider mx-"}),a("div",{},[a("label",{staticClass:"custom-label",attrs:{for:"radio-box"}},[t._v("Include Date")]),a("div",{staticClass:"radio-box d-flex align-items-center"},[a("vs-radio",{staticClass:"my-3 mr-3",attrs:{val:!0},model:{value:t.printWithDate,callback:function(e){t.printWithDate=e},expression:"printWithDate"}},[t._v("Print with date")]),a("vs-radio",{attrs:{val:!1},model:{value:t.printWithDate,callback:function(e){t.printWithDate=e},expression:"printWithDate"}},[t._v(" Print without date ")])],1)])]),a("div",{staticClass:"box mb-base"},[t._m(2),a("div",{staticClass:"divider mx-"}),a("div",{staticClass:"custom-input"},[a("label",{staticClass:"custom-label",attrs:{for:""}},[t._v("Customer")]),a("el-select",{staticClass:"w-100",attrs:{filterable:"","allow-create":"",remote:"","reserve-keyword":"","remote-method":t.getCustomers,loading:t.gettingCustomers,placeholder:""},model:{value:t.sale.customer_name,callback:function(e){t.$set(t.sale,"customer_name",e)},expression:"sale.customer_name"}},t._l(t.customers,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.name}})})),1)],1),a("div",{staticClass:"custom-input"},[a("label",{staticClass:"custom-label",attrs:{for:""}},[t._v("Status")]),a("el-select",{staticClass:"w-100",attrs:{filterable:"",placeholder:""},model:{value:t.sale.status,callback:function(e){t.$set(t.sale,"status",e)},expression:"sale.status"}},[a("el-option",{attrs:{label:"Processing",value:"Processing"}}),a("el-option",{attrs:{label:"Completed",value:"Completed"}})],1)],1),a("div",{staticClass:"custom-input"},[a("label",{staticClass:"custom-label",attrs:{for:""}},[t._v("Get Voucher")]),a("el-select",{staticClass:"w-100",attrs:{placeholder:""},model:{value:t.sale.get_voucher,callback:function(e){t.$set(t.sale,"get_voucher",e)},expression:"sale.get_voucher"}},[a("el-option",{attrs:{label:"Yes",value:!0}}),a("el-option",{attrs:{label:"No",value:!1}})],1)],1),a("div",{staticClass:"custom-input"},[a("label",{staticClass:"custom-label",attrs:{for:""}},[t._v("Payment Status")]),a("el-select",{staticClass:"w-100",attrs:{filterable:"",placeholder:""},model:{value:t.sale.payment_status,callback:function(e){t.$set(t.sale,"payment_status",e)},expression:"sale.payment_status"}},[a("el-option",{attrs:{label:"Paid",value:"Paid"}}),a("el-option",{attrs:{label:"Unpaid",value:"Unpaid"}}),a("el-option",{attrs:{label:"Partially Paid",value:"Partially Paid"}})],1)],1),a("div",{staticClass:"custom-input"},[a("label",{staticClass:"custom-label",attrs:{for:""}},[t._v("Date")]),a("el-date-picker",{staticClass:"w-100",attrs:{type:"date",format:"dd-MM-yyyy"},model:{value:t.sale.date,callback:function(e){t.$set(t.sale,"date",e)},expression:"sale.date"}})],1),a("div",{staticClass:"col-12 px-0"},[a("label",{staticClass:"custom-label mt-2 mb-0"},[t._v("Note")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.sale.note,expression:"sale.note"}],staticClass:"custom-textarea",domProps:{value:t.sale.note},on:{input:function(e){e.target.composing||t.$set(t.sale,"note",e.target.value)}}})])])])]),a("vs-dialog",{attrs:{"not-close":"",blur:"",id:"import-product"},scopedSlots:t._u([{key:"header",fn:function(){return[a("p",{staticClass:"my-0 font-weight-bold"},[t._v("Make A Payment")])]},proxy:!0},{key:"footer",fn:function(){return[a("div",{staticClass:"footer-dialog d-flex justify-content-between align-items-center mt-3"},[a("vs-button",{staticClass:"ml-0 mr-2 w-100",attrs:{size:"large",flat:""},on:{click:function(e){t.activePayment=!1}}},[t._v(" Cancel ")]),a("vs-button",{staticClass:"mr-0 ml-2 w-100",attrs:{loading:t.adding,size:"large"},on:{click:t.addPayment}},[t._v(" Save ")])],1)]},proxy:!0}]),model:{value:t.activePayment,callback:function(e){t.activePayment=e},expression:"activePayment"}},[a("div",{staticClass:"divider my-0 mx-"}),a("div",{staticClass:"con-form"},[a("vs-input",{staticClass:"w-100",attrs:{label:"Amount",placeholder:"0"},model:{value:t.payment.amount,callback:function(e){t.$set(t.payment,"amount",e)},expression:"payment.amount"}}),a("div",{staticClass:"mt-3 w-100"},[a("label",{staticClass:"custom-label md-text",attrs:{for:""}},[t._v("Payment date")]),a("el-date-picker",{staticClass:"w-100",attrs:{type:"date",format:"dd-MM-yyyy","value-format":"dd-MM-yyyy",placeholder:"Pick a date"},model:{value:t.payment.date,callback:function(e){t.$set(t.payment,"date",e)},expression:"payment.date"}})],1)],1)])],1)},Wt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex justify-content-between align-items-center"},[a("p",{staticClass:"title mb-2"},[t._v("Pricing")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex justify-content-between align-items-center"},[a("p",{staticClass:"title mb-2"},[t._v("Printer Options")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex justify-content-between align-items-center"},[a("p",{staticClass:"title mb-2"},[t._v("Organization")])])}],Qt=(a("3ca3"),a("2b3d"),{props:{isAllowedToScroll:{type:Boolean,default:!0}},data:function(){return{saving:!1,showCamera:!1,printWithDate:!1,adding:!1,apiUrl:L,appUrl:z,receiptLanguage:"Tai",loading:!0,loading_:null,stores:[],activePayment:!1,sale:{is_fullfilled:!1,date:new Date,products:[],note:null,status:"Processing",discount_type:"Ks",discount_reason:"",discount:"0",subtotal:"0",total:"0",payment_status:"Unpaid",due_amount:"0"},payment:{amount:"0",date:null},printing:!1,isEditing:!1,gettingCustomers:!1,gettingProducts:!1,gettingSale:!0,products:[],selected:[],discount:0,selectedProduct:null,activeTooltip:!1,customers:[],updating:!1,routeViewHeight:null,exporting:!1,barcode:null,audio:null}},watch:{sale:{handler:function(){this.isEditing=!0},deep:!0},barcode:{handler:function(t){this.getProductByBarcode(t)},deep:!0}},components:{},beforeMount:function(){var t=this;window.addEventListener("beforeunload",this.preventNav),this.$once("hook:beforeDestroy",(function(){window.removeEventListener("beforeunload",t.preventNav)}))},beforeRouteLeave:function(t,e,a){if(this.isEditing){var s=window.confirm("Do you really want to leave? you have unsaved changes!");s?a():a(!1)}else a()},created:function(){var t=this;this.audio=new Audio(this.appUrl+"/audio/added.wav"),setTimeout((function(){t.loading_=t.$vs.loading({target:t.$refs.loadingBox,scale:.6,type:"circles"}),t.getSale()}),300),this.payment.date=this.$moment().format("DD-MM-YYYY")},mounted:function(){},methods:{decode:function(t){this.barcode=t},getProductByBarcode:function(t){var e=this;q.a.get("api/search-products/?query="+t).then((function(t){e.addProductFrmBarcode(t.data[0])})).catch((function(t){e.gettingProducts=!1,e.$noti.display(t,"","error","danger")}))},addProductFrmBarcode:function(t){var e={date:new Date,quantity:"1",price_per_item:t.regular_price,subtotal:t.regular_price,name:t.is_main_product?t.name:t.product_name+" - "+t.name,variation_product:t.is_main_product?null:t,product:t.is_main_product?t:null,is_custom_product:!1};this.sale.products.push(e),this.audio.play(),this.scrollToLatestProduct(),this.calcSubtotal()},checkFulfill:function(){var t=!0;this.sale.products.forEach((function(e){parseInt(e.number_of_fullfilled)!==parseInt(e.quantity)&&(t=!1)})),this.sale.is_fullfilled=t,this.sale.is_fullfilled&&"Paid"==this.sale.payment_status?this.sale.status="Completed":this.sale.status="Processing"},removeProduct:function(t,e){var a=this;t.id?q.a.delete("api/remove-sale-product/"+"?spid=".concat(t.id)).then((function(){a.sale.products.splice(e,1),a.calcSubtotal()})).catch((function(t){a.$noti.display(t,"","error","danger")})):(this.sale.products.splice(e,1),this.calcSubtotal())},updatePrice:function(){this.updating=!0,this.sale.products.forEach((function(t){t.is_custom_product||(t.product?t.price_per_item=t.product.regular_price:t.variation_product&&(t.price_per_item=t.variation_product.regular_price),t.subtotal=parseInt(parseInt(t.price_per_item)*parseFloat(t.quantity)))})),this.calcSubtotal(),this.updating=!1},salePrint:function(){var t=this;this.printing=!0,q.a.get("api/sale-print/"+"?sid=".concat(this.sale.id,"&print_with_date=").concat(this.printWithDate)).then((function(e){var a=new Blob([e.data],{type:"application/html"}),s=window.URL.createObjectURL(a),i=document.createElement("a");i.href=s,i.setAttribute("download","".concat(t.sale.sale_no,"-sale-slip.html")),document.body.appendChild(i),i.click(),t.printing=!1,t.sale.get_voucher=!0})).catch((function(e){t.printing=!1,t.$noti.display(e,"","error","danger")}))},getSale:function(){var t=this;this.gettingSale=!0,q.a.get("api/sale/?sid="+this.$route.params.id).then((function(e){t.sale=e.data,t.loading_.close(),t.calcDueAmount(),setTimeout((function(){t.isEditing=!1;var e=t.$refs.routeView;t.routeViewHeight=e.clientHeight}),500),t.gettingSale=!1})).catch((function(e){t.$noti.display(e,"","error","danger"),t.gettingSale=!1}))},exportSale:function(){var t=this;this.exporting=!0,q.a.get("api/sale-export/?sid="+this.$route.params.id).then((function(e){var a=new Blob([JSON.stringify(e.data)],{type:"application/json"}),s=window.URL.createObjectURL(a),i=document.createElement("a");i.href=s,i.setAttribute("download","".concat(t.sale.sale_no,"-sale-export.json")),document.body.appendChild(i),i.click(),t.exporting=!1})).catch((function(e){t.$noti.display(e,"","error","danger"),t.exporting=!1}))},calcDueAmount:function(){var t=this.sale.payments.reduce((function(t,e){return t+parseInt(e.amount)}),0);this.sale.due_amount=parseInt(this.sale.total)-parseInt(t),this.sale.paid_amount=t,this.payment.amount=this.sale.due_amount,0===parseInt(this.sale.due_amount)?(this.sale.payment_status="Paid",this.sale.is_fullfilled?this.sale.status="Completed":this.sale.status="Processing"):parseInt(this.sale.due_amount)===parseInt(this.sale.total)?(this.sale.payment_status="Unpaid",this.sale.status="Processing"):(this.sale.payment_status="Partially Paid",this.sale.status="Processing")},getCustomers:function(t){var e=this;this.gettingCustomers=!0,""!==t&&t||(t="Null"),q.a.get("api/search-customers/?query="+t).then((function(t){e.gettingCustomers=!1,e.customers=t.data})).catch((function(t){e.gettingCustomers=!1,e.$noti.display(t,"","error","danger")}))},calcuDiscount:function(){"%"===this.sale.discount_type?this.sale.discount=parseInt(this.discount)/100*parseInt(this.sale.subtotal):this.sale.discount=parseInt(this.discount),this.calcTotal()},calcTotal:function(){this.sale.total=parseInt(this.sale.subtotal)-parseInt(this.sale.discount),this.calcDueAmount()},addCustomProduct:function(){this.sale.products.push({date:new Date,quantity:"1",price_per_item:"",subtotal:"",name:"",variation_product:null,product:null,is_custom_product:!0,created_at:new Date}),this.scrollToLatestProduct()},scrollToLatestProduct:function(){if(this.routeViewHeight>1300&&this.isAllowedToScroll){var t=document.getElementsByClassName("route-view")[0],e=this.sale.products.length-1;setTimeout((function(){var a=document.getElementById("product-".concat(e));t.scrollTo(0,a.offsetTop)}),100)}},addPayment:function(){var t=this;this.adding=!0,this.payment.sale_id=this.sale.id,this.payment.payment_status=this.sale.payment_status,q.a.post("api/payment/",{data:this.payment}).then((function(e){t.sale.payments.push(e.data),t.calcDueAmount(),t.payment={sale_id:t.sale.id,amount:"",date:t.$moment().format("DD-MM-YYYY")},t.adding=!1,t.activePayment=!1,t.Post()})).catch((function(e){t.activePayment=!1,t.adding=!1,t.$noti.display(e,"","error","danger")}))},addProduct:function(){var t=this.selectedProduct.split("_")[1],e=this.selectedProduct.split("_")[0],a=this.products.filter((function(a){return a.name===e&&parseFloat(a.id)===parseFloat(t)}))[0],s={date:new Date,quantity:"1",price_per_item:a.regular_price,subtotal:a.regular_price,name:a.is_main_product?a.name:a.product_name+" - "+a.name,variation_product:a.is_main_product?null:a,product:a.is_main_product?a:null,is_custom_product:!1};this.sale.products.push(s),this.scrollToLatestProduct(),s={},this.calcSubtotal()},preventNav:function(t){this.isEditing&&(t.preventDefault(),t.returnValue="")},getProducts:function(t){var e=this;this.gettingProducts=!0,""!==t&&t||(t="Null"),q.a.get("api/search-products/?query="+t).then((function(t){e.gettingProducts=!1,e.products=t.data})).catch((function(t){e.gettingProducts=!1,e.$noti.display(t,"","error","danger")}))},changeQuantity:function(t){this.sale.products[t].subtotal=parseInt(parseFloat(this.sale.products[t].price_per_item)*parseFloat(this.sale.products[t].quantity)),this.checkFulfill(),this.calcSubtotal()},calcSubtotal:function(){this.sale.subtotal=this.sale.products.reduce((function(t,e){return t+parseInt(e.subtotal)}),0),this.calcTotal()},Post:function(){var t=this;this.saving=!0,q.a.put("api/sale/",this.sale).then((function(e){t.sale=e.data,t.saving=!1,t.$noti.display("Cool! Sale has been successfully added.","","normal","success"),setTimeout((function(){t.isEditing=!1}),500)})).catch((function(e){t.saving=!1,t.$noti.display(e,"","error","danger")}))}},computed:Object(o["a"])({},Object(r["c"])(["isReady"]))}),Ht=Qt,Jt=(a("5664"),Object(g["a"])(Ht,Vt,Wt,!1,null,null,null)),Gt=Jt.exports,Zt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sale"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 header d-flex align-items-center justify-content-between"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/sales"}}},[t._v("Sales")]),a("el-breadcrumb-item",[t._v("Create new sale")])],1),a("div",{staticClass:"d-flex align-items-center"},[a("vs-button",{attrs:{transparent:""},on:{click:function(e){return t.$router.go(-1)}}},[a("i",{staticClass:"bx bx-x mr-1"}),a("span",[t._v("Discard")])]),a("vs-button",{attrs:{transparent:"",loading:t.saving},on:{click:function(e){return t.Post()}}},[a("i",{staticClass:"bx bx-save mr-1"}),a("span",[t._v("Confirm")])])],1)],1),a("div",{staticClass:"col-lg-8 pr-lg-0 mt-base"},[a("div",{staticClass:"box mb-base"},[a("div",{staticClass:"d-flex justify-content-between align-items-center"},[a("p",{staticClass:"title mb-2"},[t._v("Products")]),a("p",{staticClass:"primary mb-2 pointer",on:{click:t.addCustomProduct}},[t._v(" Add custom product ")])]),a("div",{staticClass:"divider mx-"}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"custom-input"},[a("label",{staticClass:"custom-label",attrs:{for:""}},[t._v("Select product")]),a("el-select",{staticClass:"w-100",attrs:{filterable:"",remote:"",clearable:"","reserve-keyword":"",placeholder:"Please enter product's name or barcode","remote-method":t.getProducts,loading:t.gettingProducts},on:{change:t.addProduct},model:{value:t.selectedProduct,callback:function(e){t.selectedProduct=e},expression:"selectedProduct"}},t._l(t.products,(function(t,e){return a("el-option",{key:t.name+e,attrs:{label:t.is_main_product?t.name:t.product_name+" - "+t.name,value:t.name+"_"+t.id}})})),1)],1)]),a("div",{staticClass:"col-12 mt-base"},[a("vs-table",{staticClass:"start-with-date",scopedSlots:t._u([{key:"thead",fn:function(){return[a("vs-tr",[a("vs-th",{staticStyle:{width:"23% !important"}},[t._v(" Added Date ")]),a("vs-th",{staticStyle:{width:"30% !important"}},[t._v(" Name ")]),a("vs-th",{staticStyle:{width:"5% !important"}},[t._v(" Quantity ")]),a("vs-th",{staticStyle:{width:"20% !important"}},[t._v(" Price ")]),a("vs-th",{staticStyle:{width:"20% !important"}},[t._v(" Subtotal ")]),a("vs-th",{staticStyle:{width:"3% !important"}})],1)]},proxy:!0},{key:"tbody",fn:function(){return t._l(t.sale.products,(function(e,s){return a("vs-tr",{key:s,attrs:{data:e}},[a("vs-td",{},[a("el-date-picker",{staticClass:"w-100",attrs:{type:"date",format:"dd-MM-yyyy",placeholder:"Pick a date"},model:{value:e.date,callback:function(a){t.$set(e,"date",a)},expression:"tr.date"}})],1),e.is_custom_product?a("vs-td",[a("vs-input",{staticClass:"w-100",model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"tr.name"}})],1):a("vs-td",[t._v(" "+t._s(e.name)+" ")]),a("vs-td",[a("vs-input",{staticClass:"w-100",attrs:{type:"number"},on:{change:function(e){return t.changeQuantity(s)}},model:{value:e.quantity,callback:function(a){t.$set(e,"quantity",a)},expression:"tr.quantity"}})],1),a("vs-td",[a("vs-input",{staticClass:"w-100",attrs:{type:"number"},on:{change:function(e){return t.changeQuantity(s)}},model:{value:e.price_per_item,callback:function(a){t.$set(e,"price_per_item",a)},expression:"tr.price_per_item"}})],1),a("vs-td",[t._v(" "+t._s(e.subtotal)+" Ks ")]),a("vs-td",[a("vs-button",{staticClass:"m-0",attrs:{transparent:"",icon:"",danger:""},on:{click:function(e){return t.removeProduct(s)}}},[a("i",{staticClass:"bx bx-x"})])],1)],1)}))},proxy:!0},{key:"notFound",fn:function(){return[a("div",{staticClass:"d-flex align-items-center justify-content-center"},[a("div",{staticClass:"my-2"},[a("img",{attrs:{src:"http://localhost:3000/image/noEvent.png",width:"150px",alt:""}}),a("p",{staticStyle:{color:"rgba(var(--vs-text), 0.7)"}},[t._v(" No data found! ")])])])]},proxy:!0}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1)])]),a("div",{staticClass:"box mb-base"},[t._m(0),a("div",{staticClass:"divider mx-"}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"d-flex justify-content-between align-items-center"},[a("vs-tooltip",{attrs:{bottom:"",shadow:"","not-hover":""},scopedSlots:t._u([{key:"tooltip",fn:function(){return[a("div",{staticClass:"content-tooltip mt-3"},[a("div",{staticClass:"w-100",staticStyle:{display:"flex","align-items":"flex-start","justify-content":"flex-start"}},[a("label",{staticClass:"custom-label md-text"},[t._v("Discount this sale by")])]),a("div",{staticClass:"d-flex justify-content-between align-items-center"},[a("div",{staticClass:"d-flex justify-content-center align-items-center"},[a("vs-button",{staticClass:"ml-0",attrs:{icon:"",flat:""},on:{click:function(e){t.sale.discount_type="Ks"}}},[a("p",{staticClass:"d-flex mb-0 align-items-center justify-content-center",staticStyle:{width:"20px",height:"20px"}},[t._v(" Ks ")])]),a("vs-button",{attrs:{icon:"",flat:""},on:{click:function(e){t.sale.discount_type="%"}}},[a("p",{staticClass:"d-flex mb-0 align-items-center justify-content-center",staticStyle:{width:"20px",height:"20px"}},[t._v(" % ")])])],1),a("div",{staticClass:"row"},[a("div",{staticClass:"col-9"},[a("vs-input",{staticClass:"ml-2 w-100",model:{value:t.discount,callback:function(e){t.discount=e},expression:"discount"}})],1),a("div",{staticClass:"col-3 p-0 d-flex align-items-center justify-content-center"},[a("p",{staticClass:"my-0",staticStyle:{width:"15px","margin-left":"-15px"}},[t._v(" "+t._s(t.sale.discount_type)+" ")])])])]),a("vs-input",{staticClass:"w-100",attrs:{label:"Reason"},model:{value:t.sale.discount_reason,callback:function(e){t.$set(t.sale,"discount_reason",e)},expression:"sale.discount_reason"}}),a("footer",{staticClass:"mt-3 mb-1 d-flex justify-content-between align-items-center"},[a("vs-button",{staticClass:"ml-0 mr-3",attrs:{size:"large",flat:"",block:""},on:{click:function(e){t.activeTooltip=!1}}},[t._v(" Cancel ")]),a("vs-button",{staticClass:"m-0",attrs:{block:""},on:{click:t.calcuDiscount}},[t._v(" Apply ")])],1)],1)]},proxy:!0}]),model:{value:t.activeTooltip,callback:function(e){t.activeTooltip=e},expression:"activeTooltip"}},[a("p",{staticClass:"primary pointer my-1",on:{click:function(e){t.activeTooltip=!t.activeTooltip}}},[t._v(" Add discount ")])]),a("div",[a("p",{staticClass:"my-1"},[t._v(" "+t._s(0===parseInt(t.sale.discount)?"-":"-"+t.sale.discount)+" Ks ")]),a("p",{staticClass:"sm-text m-0"},[t._v(t._s(t.sale.discount_reason))])])],1),a("div",{staticClass:"divider"}),a("div",{staticClass:"d-flex justify-content-between align-items-center mt-2"},[a("p",{staticClass:"my-1"},[t._v("Subtotal")]),a("p",{staticClass:"my-1"},[t._v(" "+t._s(0===parseInt(t.sale.subtotal)?"-":t.sale.subtotal)+" Ks ")])]),a("div",{staticClass:"divider"}),a("div",{staticClass:"d-flex justify-content-between align-items-center mt-2"},[a("p",{staticClass:"my-1"},[t._v("Total")]),a("p",{staticClass:"my-1"},[t._v(" "+t._s(0===parseInt(t.sale.total)?"-":t.sale.total)+" Ks ")])])])])])])])]),a("div",{staticClass:"col-lg-4 right-sidebar"},[a("div",{staticClass:"box"},[t._m(1),a("div",{staticClass:"divider mx-"}),a("div",{staticClass:"custom-input"},[a("label",{staticClass:"custom-label",attrs:{for:""}},[t._v("Customer")]),a("el-select",{staticClass:"w-100",attrs:{filterable:"","allow-create":"",remote:"","reserve-keyword":"","remote-method":t.getCustomers,loading:t.gettingCustomers,placeholder:""},model:{value:t.sale.customer_name,callback:function(e){t.$set(t.sale,"customer_name",e)},expression:"sale.customer_name"}},t._l(t.customers,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.name}})})),1)],1),a("div",{staticClass:"custom-input"},[a("label",{staticClass:"custom-label",attrs:{for:""}},[t._v("Status")]),a("el-select",{staticClass:"w-100",attrs:{filterable:"",placeholder:""},model:{value:t.sale.status,callback:function(e){t.$set(t.sale,"status",e)},expression:"sale.status"}},[a("el-option",{attrs:{label:"Processing",value:"Processing"}}),a("el-option",{attrs:{label:"Completed",value:"Completed"}})],1)],1),a("div",{staticClass:"custom-input"},[a("label",{staticClass:"custom-label",attrs:{for:""}},[t._v("Payment Status")]),a("el-select",{staticClass:"w-100",attrs:{filterable:"",placeholder:""},model:{value:t.sale.payment_status,callback:function(e){t.$set(t.sale,"payment_status",e)},expression:"sale.payment_status"}},[a("el-option",{attrs:{label:"Paid",value:"Paid"}}),a("el-option",{attrs:{label:"Unpaid",value:"Unpaid"}}),a("el-option",{attrs:{label:"Partially Paid",value:"Partially Paid"}})],1)],1),a("div",{staticClass:"custom-input"},[a("label",{staticClass:"custom-label",attrs:{for:""}},[t._v("Date")]),a("el-date-picker",{staticClass:"w-100",attrs:{type:"date",format:"dd-MM-yyyy"},model:{value:t.sale.date,callback:function(e){t.$set(t.sale,"date",e)},expression:"sale.date"}})],1),a("div",{staticClass:"col-12 px-0"},[a("label",{staticClass:"custom-label mt-2 mb-0"},[t._v("Note")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.sale.note,expression:"sale.note"}],staticClass:"custom-textarea",domProps:{value:t.sale.note},on:{input:function(e){e.target.composing||t.$set(t.sale,"note",e.target.value)}}})])])])])])},Xt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex justify-content-between align-items-center"},[a("p",{staticClass:"title mb-2"},[t._v("Pricing")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex justify-content-between align-items-center"},[a("p",{staticClass:"title mb-2"},[t._v("Organization")])])}],te={data:function(){return{saving:!1,apiUrl:L,appUrl:z,loading:!0,stores:[],selected:[],sale:{date:new Date,products:[],note:null,status:"Processing",discount_type:"Ks",discount_reason:"",discount:"0",subtotal:"0",total:"0",payment_status:"Unpaid"},showCamera:!1,barcode:null,adding:!1,audio:null,isEditing:!1,gettingCustomers:!1,gettingProducts:!1,products:[],discount:0,selectedProduct:null,activeTooltip:!1,customers:[]}},mounted:function(){},watch:{sale:{handler:function(){this.isEditing=!0},deep:!0},barcode:{handler:function(t){this.getProductByBarcode(t)},deep:!0}},components:{},beforeMount:function(){var t=this;window.addEventListener("beforeunload",this.preventNav),this.$once("hook:beforeDestroy",(function(){window.removeEventListener("beforeunload",t.preventNav)}))},beforeRouteLeave:function(t,e,a){if(this.isEditing){var s=window.confirm("Do you really want to leave? you have unsaved changes!");s?a():a(!1)}else a()},created:function(){this.audio=new Audio(this.appUrl+"/audio/added.wav")},methods:{decode:function(t){this.barcode=t},getProductByBarcode:function(t){var e=this;q.a.get("api/search-products/?query="+t).then((function(t){e.addProductFrmBarcode(t.data[0])})).catch((function(t){e.gettingProducts=!1,e.$noti.display(t,"","error","danger")}))},addProductFrmBarcode:function(t){var e={date:new Date,quantity:"1",price_per_item:t.regular_price,subtotal:t.regular_price,name:t.is_main_product?t.name:t.product_name+" - "+t.name,variation_product:t.is_main_product?null:t,product:t.is_main_product?t:null,is_custom_product:!1};this.sale.products.push(e),this.audio.play(),this.calcSubtotal()},removeProduct:function(t){this.sale.products.splice(t,1),this.calcSubtotal()},getCustomers:function(t){var e=this;this.gettingCustomers=!0,""!==t&&t||(t="Null"),q.a.get("api/search-customers/?query="+t).then((function(t){e.gettingCustomers=!1,e.customers=t.data})).catch((function(t){e.gettingCustomers=!1,e.$noti.display(t,"","error","danger")}))},calcuDiscount:function(){"%"===this.sale.discount_type?this.sale.discount=parseInt(this.discount)/100*parseInt(this.sale.subtotal):this.sale.discount=parseInt(this.discount),this.calcTotal()},calcTotal:function(){this.sale.total=parseInt(this.sale.subtotal)-parseInt(this.sale.discount)},calcDueAmount:function(){this.sale.due_amount=parseInt(this.sale.total)-parseInt(this.sale.payments.reduce((function(t,e){return t+parseInt(e.amount)}),0)),0===parseInt(this.sale.due_amount)?this.sale.payment_status="Paid":parseInt(this.sale.due_amount)===parseInt(this.sale.total)?this.sale.payment_status="Unpaid":this.sale.payment_status="Partially Paid"},addCustomProduct:function(){this.sale.products.push({date:new Date,quantity:"1",price_per_item:"",subtotal:"",name:"",variation_product:null,product:null,is_custom_product:!0})},addProduct:function(){var t=this.selectedProduct.split("_")[1],e=this.selectedProduct.split("_")[0],a=this.products.filter((function(a){return a.name===e&&parseFloat(a.id)===parseFloat(t)}))[0],s=this.sale.products.filter((function(t){return t.product?t.product.name===a.name&&parseFloat(t.product.id)===parseFloat(a.id):t.variation_product?t.variation_product.name===a.name&&parseFloat(t.variation_product.id)===parseFloat(a.id):void 0}))[0];if(s)s.quantity=parseFloat(s.quantity)+1,s.subtotal=parseFloat(s.quantity)*parseFloat(s.price_per_item);else{var i={date:new Date,quantity:"1",price_per_item:a.regular_price,subtotal:a.regular_price,name:a.is_main_product?a.name:a.product_name+" - "+a.name,variation_product:a.is_main_product?null:a,product:a.is_main_product?a:null,is_custom_product:!1};this.sale.products.push(i),i={}}this.calcSubtotal()},preventNav:function(t){this.isEditing&&(t.preventDefault(),t.returnValue="")},getProducts:function(t){var e=this;this.gettingProducts=!0,""!==t&&t||(t="Null"),q.a.get("api/search-products/?query="+t).then((function(t){e.gettingProducts=!1,e.products=t.data})).catch((function(t){e.gettingProducts=!1,e.$noti.display(t,"","error","danger")}))},changeQuantity:function(t){this.sale.products[t].subtotal=parseFloat(this.sale.products[t].price_per_item)*parseFloat(this.sale.products[t].quantity),this.calcSubtotal()},calcSubtotal:function(){this.sale.subtotal=this.sale.products.reduce((function(t,e){return t+parseInt(e.subtotal)}),0),this.calcTotal()},Post:function(){var t=this;this.saving=!0,this.sale.due_amount=this.sale.total,q.a.post("api/sale/",this.sale).then((function(e){t.saving=!1,t.$noti.display("Cool! Sale has been successfully added.","","normal","success"),t.isEditing=!1,t.$router.push({name:"Sale",params:{id:e.data.id}})})).catch((function(e){t.saving=!1,t.$noti.display(e,"","error","danger")}))}},computed:Object(o["a"])({},Object(r["c"])(["isReady"]))},ee=te,ae=Object(g["a"])(ee,Zt,Xt,!1,null,"bc69ed3c",null),se=ae.exports,ie=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"roles"},[a("div",{staticClass:"row mb-base"},[a("div",{staticClass:"col-12 header d-flex align-items-center justify-content-between"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/imports"}}},[t._v("Imports")])],1),a("div",{staticClass:"d-flex align-items-center"},[a("vs-button",{attrs:{transparent:"",to:"/create-new-import"}},[a("i",{staticClass:"bx bx-plus mr-1"}),t._v("Create new import ")])],1)],1),a("div",{staticClass:"w-100 position-absolute",staticStyle:{height:"100vh"}},[a("div",{ref:"loadingBox",staticClass:"route-loading"})]),t.getting?t._e():a("div",{staticClass:"col-12 mt-base animated fadeIn"},[a("div",{staticClass:"box pt-3"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 mb-3 d-flex align-items-center justify-content-between"},[a("div",{staticClass:"d-flex justify-content-between align-items-center"},[a("vs-select",{staticClass:"page-size-selector",on:{change:t.getImports},model:{value:t.pageSize,callback:function(e){t.pageSize=e},expression:"pageSize"}},t._l(10,(function(e){return a("vs-option",{key:e,attrs:{label:5*e,value:5*e}},[t._v(" "+t._s(5*e)+" ")])})),1),a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",placeholder:"search by date",type:"date"},on:{change:t.getImportsWithDate},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)])]),a("vs-table",{scopedSlots:t._u([{key:"header",fn:function(){},proxy:!0},{key:"thead",fn:function(){return[a("vs-tr",[a("vs-th",[t._v(" Imported Date")]),a("vs-th",[t._v(" Total Price")]),a("vs-th",[t._v(" Note")])],1)]},proxy:!0},{key:"notFound",fn:function(){return[a("div",{staticClass:"d-flex align-items-center justify-content-center",staticStyle:{height:"53vh"}},[a("div",[a("img",{attrs:{src:"image/noEvent.png",width:"150px",alt:""}}),a("p",{staticStyle:{color:"rgba(var(--vs-text), 0.7)"}},[t._v("No data found!")])])])]},proxy:!0},{key:"tbody",fn:function(){return t._l(t.imports.results,(function(e,s){return a("vs-tr",{key:s,staticClass:"animated fadeIn",style:"animation-delay: "+45*s+"ms",attrs:{data:e,"is-selected":!!t.selected.includes(e),"not-click-selected":"","open-expand-only-td":""}},[a("vs-td",{on:{click:function(a){return t.$router.push({name:"Import",params:{id:e.id}})}}},[t._v(" "+t._s(t.$moment(e.imported_date).format("DD-MM-YYYY"))+" ")]),a("vs-td",{on:{click:function(a){return t.$router.push({name:"Import",params:{id:e.id}})}}},[t._v(" "+t._s(t.getTotalPrice(e.products))+" Ks ")]),a("vs-td",{on:{click:function(a){return t.$router.push({name:"Import",params:{id:e.id}})}}},[a("p",{staticClass:"truncate mb-0",staticStyle:{"max-width":"250px !important"}},[t._v(" "+t._s(e.note)+" ")])])],1)}))},proxy:!0},{key:"footer",fn:function(){return[a("vs-pagination",{attrs:{length:t.imports.total_pages},model:{value:t.imports.current_page,callback:function(e){t.$set(t.imports,"current_page",e)},expression:"imports.current_page"}})]},proxy:!0}],null,!1,2904950634),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1)])])])},ne=[],oe={data:function(){return{apiUrl:L,search:"",page:1,allCheck:!1,max:5,pageSize:15,active:0,date:null,selected:[],removing:!1,getting:!0,imports:{current_page:1,results:[]},loading:null}},watch:{"imports.current_page":{handler:function(){this.getImports()},deep:!0},search:function(){this.getImports()}},created:function(){var t=this;setTimeout((function(){t.loading=t.$vs.loading({target:t.$refs.loadingBox,scale:.6,type:"circles"}),t.getImports()}),300)},mounted:function(){},methods:{getImportsWithDate:function(){this.imports.current_page=1,this.getImports()},getTotalPrice:function(t){return t.reduce((function(t,e){return t+parseInt(e.subtotal)}),0)},getImports:function(){var t=this;null==this.date&&(this.date="");var e="api/imports/?page=".concat(this.imports.current_page,"&page_size=").concat(this.pageSize,"&query=").concat(this.search,"&date=").concat(this.date);q.a.get(e).then((function(e){t.loading.close(),t.imports.results=e.data.results,t.imports.total_pages=e.data.total_pages,t.getting=!1})).catch((function(e){t.loading=!1,t.$noti.display(e,"","error","danger")}))}},computed:Object(o["a"])({},Object(r["c"])(["isReady"]))},re=oe,ce=Object(g["a"])(re,ie,ne,!1,null,null,null),le=ce.exports,ue=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"shops-list"},[a("div",{staticClass:"row mb-base"},[a("div",{staticClass:"col-12 header d-flex align-items-center justify-content-between"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/imports"}}},[t._v("Imports")]),a("el-breadcrumb-item",[t._v("Imports")])],1),a("div",{staticClass:"d-flex align-items-center"},[a("vs-button",{attrs:{transparent:""},on:{click:function(e){return t.$router.go(-1)}}},[a("i",{staticClass:"bx bx-x mr-1"}),a("span",[t._v("Discard")])]),a("vs-button",{attrs:{transparent:"",loading:t.saving},on:{click:function(e){return t.Post()}}},[a("i",{staticClass:"bx bx-save mr-1"}),a("span",[t._v("Save")])])],1)],1),a("div",{staticClass:"col-lg-8 pr-lg-0 mt-base"},[a("div",{staticClass:"box"},[t._m(0),a("div",{staticClass:"divider mx-"}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"custom-input"},[a("label",{staticClass:"custom-label",attrs:{for:""}},[t._v("Select product")]),a("el-select",{staticClass:"w-100",attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"Please enter product's name or barcode","remote-method":t.getProducts,loading:t.gettingProducts},on:{change:t.addProduct},model:{value:t.selectedProduct,callback:function(e){t.selectedProduct=e},expression:"selectedProduct"}},t._l(t.products,(function(t,e){return a("el-option",{key:t.name+e,attrs:{label:t.is_main_product?t.name:t.product_name+" - "+t.name,value:t.name+"-"+t.id}})})),1)],1)]),a("div",{staticClass:"col-12 mt-base"},[a("vs-table",{scopedSlots:t._u([{key:"thead",fn:function(){return[a("vs-tr",[a("vs-th",[t._v(" Name ")]),a("vs-th",{staticStyle:{width:"20% !important"}},[t._v(" Quantity ")]),a("vs-th",{staticStyle:{width:"20% !important"}},[t._v(" Price per item ")]),a("vs-th",{staticStyle:{width:"20% !important"}},[t._v(" Subtotal ")])],1)]},proxy:!0},{key:"tbody",fn:function(){return t._l(t.imports.products,(function(e,s){return a("vs-tr",{key:s,attrs:{data:e}},[a("vs-td",[t._v(" "+t._s(e.name)+" ")]),a("vs-td",[a("vs-input",{staticClass:"w-100",attrs:{type:"number"},on:{change:function(e){return t.changeQuantity(s)}},model:{value:e.quantity,callback:function(a){t.$set(e,"quantity",a)},expression:"tr.quantity"}})],1),a("vs-td",[a("vs-input",{staticClass:"w-100",attrs:{type:"number"},on:{change:function(e){return t.changeQuantity(s)}},model:{value:e.price_per_item,callback:function(a){t.$set(e,"price_per_item",a)},expression:"tr.price_per_item"}})],1),a("vs-td",[t._v(" "+t._s(e.subtotal)+" Ks ")])],1)}))},proxy:!0},{key:"notFound",fn:function(){return[a("div",{staticClass:"d-flex align-items-center justify-content-center"},[a("div",{staticClass:"my-2"},[a("img",{attrs:{src:"http://localhost:3000/image/noEvent.png",width:"150px",alt:""}}),a("p",{staticStyle:{color:"rgba(var(--vs-text), 0.7)"}},[t._v(" No data found! ")])])])]},proxy:!0}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1)])])]),a("div",{staticClass:"col-lg-4 right-sidebar"},[a("div",{staticClass:"box mb-base"},[t._m(1),a("div",{staticClass:"divider mx-"}),a("div",{staticClass:"custom-input"},[a("label",{staticClass:"custom-label",attrs:{for:""}},[t._v("Imported Date")]),a("el-date-picker",{staticClass:"w-100",attrs:{type:"date",disabled:"",format:"dd-MM-yyyy"},model:{value:t.imports.imported_date,callback:function(e){t.$set(t.imports,"imported_date",e)},expression:"imports.imported_date"}})],1),a("div",{staticClass:"col-12 px-0"},[a("label",{staticClass:"custom-label mt-2 mb-0"},[t._v("Note")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.imports.note,expression:"imports.note"}],staticClass:"custom-textarea",domProps:{value:t.imports.note},on:{input:function(e){e.target.composing||t.$set(t.imports,"note",e.target.value)}}})])])])])])},de=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex justify-content-between align-items-center"},[a("p",{staticClass:"title mb-2"},[t._v("General information")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex justify-content-between align-items-center"},[a("p",{staticClass:"title mb-2"},[t._v("Organization")])])}],pe={data:function(){return{saving:!1,apiUrl:L,mediaUrl:M,loading:!0,selected:[],stores:[],imports:{imported_date:new Date,store:null,products:[],note:null},isEditing:!1,gettingProducts:!1,products:[],selectedProduct:null}},mounted:function(){},watch:{imports:{handler:function(){this.isEditing=!0},deep:!0}},components:{},beforeMount:function(){var t=this;window.addEventListener("beforeunload",this.preventNav),this.$once("hook:beforeDestroy",(function(){window.removeEventListener("beforeunload",t.preventNav)}))},beforeRouteLeave:function(t,e,a){if(this.isEditing){var s=window.confirm("Do you really want to leave? you have unsaved changes!");s?a():a(!1)}else a()},created:function(){this.getImport()},methods:{getImport:function(){var t=this;q.a.get("api/import/?iid="+this.$route.params.id).then((function(e){t.imports=e.data,t.gettingProduct=!1,setTimeout((function(){t.isEditing=!1}),500)})).catch((function(e){t.gettingProduct=!1,t.$noti.display(e,"","error","danger")}))},addProduct:function(){var t=this.selectedProduct.split("-")[1],e=this.selectedProduct.split("-")[0],a=this.products.filter((function(a){return a.name===e&&parseInt(a.id)===parseInt(t)}))[0],s=this.imports.products.filter((function(t){return t.product?t.product.name===a.name&&parseInt(t.product.id)===parseInt(a.id):t.variation_product?t.variation_product.name===a.name&&parseInt(t.variation_product.id)===parseInt(a.id):void 0}))[0];if(s)s.quantity=parseInt(s.quantity)+1,s.subtotal=parseInt(s.quantity)*parseInt(s.price_per_item);else{var i={quantity:"1",price_per_item:a.regular_price,subtotal:a.regular_price,name:a.is_main_product?a.name:a.product_name+" - "+a.name,variation_product:a.is_main_product?null:a,product:a.is_main_product?a:null};this.imports.products.push(i),i={}}},preventNav:function(t){this.isEditing&&(t.preventDefault(),t.returnValue="")},getProducts:function(t){var e=this;this.gettingProducts=!0,""!==t&&t||(t="Null"),q.a.get("api/search-products/?query="+t).then((function(t){e.gettingProducts=!1,e.products=t.data})).catch((function(t){e.gettingProducts=!1,e.$noti.display(t,"","error","danger")}))},changeQuantity:function(t){this.imports.products[t].subtotal=parseInt(this.imports.products[t].price_per_item)*parseInt(this.imports.products[t].quantity)},Post:function(){var t=this;this.saving=!0,q.a.put("api/import/",this.imports).then((function(){t.saving=!1,t.$noti.display("Cool! Import has been successfully added.","","normal","success"),t.isEditing=!1,t.$router.go(-1)})).catch((function(e){t.saving=!1,t.$noti.display(e,"","error","danger")}))}},computed:Object(o["a"])({},Object(r["c"])(["isReady"]))},me=pe,ve=Object(g["a"])(me,ue,de,!1,null,"160e479e",null),fe=ve.exports,he=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"shops-list"},[a("div",{staticClass:"row mb-base"},[a("div",{staticClass:"col-12 header d-flex align-items-center justify-content-between"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/imports"}}},[t._v("Imports")]),a("el-breadcrumb-item",[t._v("Create new import")])],1),a("div",{staticClass:"d-flex align-items-center"},[a("vs-button",{attrs:{transparent:""},on:{click:function(e){return t.$router.go(-1)}}},[a("i",{staticClass:"bx bx-x mr-1"}),a("span",[t._v("Discard")])]),a("vs-button",{attrs:{transparent:"",loading:t.saving},on:{click:function(e){return t.Post()}}},[a("i",{staticClass:"bx bx-save mr-1"}),a("span",[t._v("Save")])])],1)],1),a("div",{staticClass:"col-lg-8 pr-lg-0 mt-base"},[a("div",{staticClass:"box"},[t._m(0),a("div",{staticClass:"divider mx-"}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"custom-input"},[a("label",{staticClass:"custom-label",attrs:{for:""}},[t._v("Select product")]),a("el-select",{staticClass:"w-100",attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"Please enter product's name or barcode","remote-method":t.getProducts,loading:t.gettingProducts},on:{change:t.addProduct},model:{value:t.selectedProduct,callback:function(e){t.selectedProduct=e},expression:"selectedProduct"}},t._l(t.products,(function(t,e){return a("el-option",{key:t.name+e,attrs:{label:t.is_main_product?t.name:t.product_name+" - "+t.name,value:t.name+"-"+t.id}})})),1)],1)]),a("div",{staticClass:"col-12 mt-base"},[a("vs-table",{scopedSlots:t._u([{key:"thead",fn:function(){return[a("vs-tr",[a("vs-th",[t._v(" Name ")]),a("vs-th",{staticStyle:{width:"20% !important"}},[t._v(" Quantity ")]),a("vs-th",{staticStyle:{width:"20% !important"}},[t._v(" Price per item ")]),a("vs-th",{staticStyle:{width:"20% !important"}},[t._v(" Subtotal ")])],1)]},proxy:!0},{key:"tbody",fn:function(){return t._l(t.imports.products,(function(e,s){return a("vs-tr",{key:s,attrs:{data:e}},[a("vs-td",[t._v(" "+t._s(e.name)+" ")]),a("vs-td",[a("vs-input",{staticClass:"w-100",attrs:{type:"number"},on:{change:function(e){return t.changeQuantity(s)}},model:{value:e.quantity,callback:function(a){t.$set(e,"quantity",a)},expression:"tr.quantity"}})],1),a("vs-td",[a("vs-input",{staticClass:"w-100",attrs:{type:"number"},on:{change:function(e){return t.changeQuantity(s)}},model:{value:e.price_per_item,callback:function(a){t.$set(e,"price_per_item",a)},expression:"tr.price_per_item"}})],1),a("vs-td",[t._v(" "+t._s(e.subtotal)+" Ks ")])],1)}))},proxy:!0},{key:"notFound",fn:function(){return[a("div",{staticClass:"d-flex align-items-center justify-content-center"},[a("div",{staticClass:"my-2"},[a("img",{attrs:{src:"http://localhost:3000/image/noEvent.png",width:"150px",alt:""}}),a("p",{staticStyle:{color:"rgba(var(--vs-text), 0.7)"}},[t._v(" No data found! ")])])])]},proxy:!0}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1)])])]),a("div",{staticClass:"col-lg-4 right-sidebar"},[a("div",{staticClass:"box mb-base"},[t._m(1),a("div",{staticClass:"divider mx-"}),a("div",{staticClass:"custom-input"},[a("label",{staticClass:"custom-label",attrs:{for:""}},[t._v("Imported Date")]),a("el-date-picker",{staticClass:"w-100",attrs:{type:"date",format:"dd-MM-yyyy"},model:{value:t.imports.imported_date,callback:function(e){t.$set(t.imports,"imported_date",e)},expression:"imports.imported_date"}})],1),a("div",{staticClass:"col-12 px-0"},[a("label",{staticClass:"custom-label mt-2 mb-0"},[t._v("Note")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.imports.note,expression:"imports.note"}],staticClass:"custom-textarea",domProps:{value:t.imports.note},on:{input:function(e){e.target.composing||t.$set(t.imports,"note",e.target.value)}}})])])])])])},ge=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex justify-content-between align-items-center"},[a("p",{staticClass:"title mb-2"},[t._v("General information")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex justify-content-between align-items-center"},[a("p",{staticClass:"title mb-2"},[t._v("Organization")])])}],_e={data:function(){return{saving:!1,apiUrl:L,mediaUrl:M,loading:!0,stores:[],selected:[],imports:{imported_date:new Date,store:null,products:[],note:null},isEditing:!1,gettingStores:!1,gettingProducts:!1,products:[],selectedProduct:null}},mounted:function(){},watch:{imports:{handler:function(){this.isEditing=!0},deep:!0}},components:{},beforeMount:function(){var t=this;window.addEventListener("beforeunload",this.preventNav),this.$once("hook:beforeDestroy",(function(){window.removeEventListener("beforeunload",t.preventNav)}))},beforeRouteLeave:function(t,e,a){if(this.isEditing){var s=window.confirm("Do you really want to leave? you have unsaved changes!");s?a():a(!1)}else a()},created:function(){},methods:{addProduct:function(){var t=this.selectedProduct.split("-")[1],e=this.selectedProduct.split("-")[0],a=this.products.filter((function(a){return a.name===e&&parseInt(a.id)===parseInt(t)}))[0],s=this.imports.products.filter((function(t){return t.product?t.product.name===a.name&&parseInt(t.product.id)===parseInt(a.id):t.variation_product?t.variation_product.name===a.name&&parseInt(t.variation_product.id)===parseInt(a.id):void 0}))[0];if(s)s.quantity=parseInt(s.quantity)+1,s.subtotal=parseInt(s.quantity)*parseInt(s.price_per_item);else{var i={quantity:"1",price_per_item:a.regular_price,subtotal:a.regular_price,name:a.is_main_product?a.name:a.product_name+" - "+a.name,variation_product:a.is_main_product?null:a,product:a.is_main_product?a:null};this.imports.products.push(i),i={}}},preventNav:function(t){this.isEditing&&(t.preventDefault(),t.returnValue="")},getStores:function(t){var e=this;this.gettingStores=!0,""!==t&&t||(t="Null"),q.a.get("api/search-stores/?query="+t).then((function(t){e.gettingStores=!1,e.stores=t.data})).catch((function(t){e.gettingStores=!1,e.$noti.display(t,"","error","danger")}))},getProducts:function(t){var e=this;this.gettingProducts=!0,""!==t&&t||(t="Null"),q.a.get("api/search-products/?query="+t).then((function(t){e.gettingProducts=!1,e.products=t.data})).catch((function(t){e.gettingProducts=!1,e.$noti.display(t,"","error","danger")}))},changeQuantity:function(t){this.imports.products[t].subtotal=parseInt(this.imports.products[t].price_per_item)*parseInt(this.imports.products[t].quantity)},Post:function(){var t=this;this.saving=!0,q.a.post("api/import/",this.imports).then((function(){t.saving=!1,t.$noti.display("Cool! Import has been successfully added.","","normal","success"),t.isEditing=!1,t.$router.go(-1)})).catch((function(e){t.saving=!1,t.$noti.display(e,"","error","danger")}))}},computed:Object(o["a"])({},Object(r["c"])(["isReady"]))},be=_e,ye=Object(g["a"])(be,he,ge,!1,null,"82b9c79c",null),Ce=ye.exports,xe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex align-items-center justify-content-center",staticStyle:{height:"100vh",padding:"0px !important"}},[a("div",{staticClass:"page-status-box d-flex flex-column align-items-center justify-content-center"},[a("img",{staticStyle:{width:"350px"},attrs:{src:"/image/not_found.svg",alt:""}}),a("h4",{staticClass:"text-color my-3"},[t._v("404 Not Found!")]),a("vs-button",{attrs:{to:"/"}},[t._v("Go to home page")])],1)])},we=[],ke={},Se=ke,Pe=Object(g["a"])(Se,xe,we,!1,null,null,null),$e=Pe.exports;s["default"].use(H["a"]);var Ie=[{path:"/",name:"Dashboard",component:ft,meta:{requiresAuth:!0,class:"dashboard"}},{path:"/login",name:"Login",component:st,meta:{requiresVisitor:!0,class:"auth"}},{path:"/imports",name:"Imports",component:le,meta:{requiresAuth:!0,class:"import"}},{path:"/import/:id",name:"Import",component:fe,meta:{requiresAuth:!0,class:"import"}},{path:"/create-new-import",name:"CreateNewImport",component:Ce,meta:{requiresAuth:!0,class:"import"}},{path:"/inventory",name:"Inventory",component:lt,meta:{requiresAuth:!0,class:"inventory"}},{path:"/products",name:"Products",component:Ct,meta:{requiresAuth:!0,class:"product"}},{path:"/product/:id",name:"Product",component:$t,meta:{requiresAuth:!0,class:"product"}},{path:"/create-new-product",name:"CreateNewProduct",component:Ot,meta:{requiresAuth:!0,class:"product"}},{path:"/sale-products",name:"SaleProducts",component:Ut,meta:{requiresAuth:!0,class:"sale-product"}},{path:"/sales",name:"Sales",component:Kt,meta:{requiresAuth:!0,class:"sale"}},{path:"/sale/:id",name:"Sale",component:Gt,meta:{requiresAuth:!0,class:"sale"}},{path:"/create-new-sale",name:"CreateNewSale",component:se,meta:{requiresAuth:!0,class:"sale"}},{path:"/*",component:$e}],je=new H["a"]({mode:"history",base:"/",routes:Ie,linkActiveClass:"active",linkExactActiveClass:"exact-active"});G(je);var De=je,Ee=(a("96cf"),a("1da1")),Te={logIn:function(){var t=Object(Ee["a"])(regeneratorRuntime.mark((function t(e,a){var s,i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=e.commit,i=e.dispatch,n="api/login/",t.prev=2,t.next=5,q.a.post(n,a).then((function(t){200===t.status&&(s("setRefreshToken",t.data.refresh),s("setAccessToken",t.data.access),s("setIsAuthenticated",!0),i("fetchUser"),De.push(De.currentRoute.query.redirect||"/"))}));case 5:t.next=10;break;case 7:return t.prev=7,t.t0=t["catch"](2),t.abrupt("return",t.t0);case 10:case"end":return t.stop()}}),t,null,[[2,7]])})));function e(e,a){return t.apply(this,arguments)}return e}(),refreshToken:function(){var t=Object(Ee["a"])(regeneratorRuntime.mark((function t(e){var a,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.state,s=e.commit,i="api/login/refresh/",t.prev=2,t.next=5,q.a.post(i,{refresh:a.refresh_token}).then((function(t){200===t.status&&s("setAccessToken",t.data.access)}));case 5:t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](2),console.log(t.t0.response);case 10:case"end":return t.stop()}}),t,null,[[2,7]])})));function e(e){return t.apply(this,arguments)}return e}(),logout:function(t){var e=t.commit;e("clearUserData"),De.push({name:"Login"})},fetchUser:function(){var t=Object(Ee["a"])(regeneratorRuntime.mark((function t(e){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,s="api/users/me/",t.prev=2,t.next=5,q.a.get(s).then((function(t){200===t.status&&a("setLoggedInUser",t.data)}));case 5:t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](2),console.log(t.t0.response);case 10:case"end":return t.stop()}}),t,null,[[2,7]])})));function e(e){return t.apply(this,arguments)}return e}(),getFile:function(){var t=Object(Ee["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,t.next=3,q.a.get("api/files/").then((function(t){a("setFile",t.data)})).catch((function(t){return t}));case 3:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},Oe={loggedInUser:function(t){return t.loggedInUser},isAuthenticated:function(t){return t.isAuthenticated},accessToken:function(t){return t.access_token},refreshToken:function(t){return t.refresh_token}},Ne=(a("caad"),a("2532"),a("2909")),Ae={setRefreshToken:function(t,e){t.refresh_token=e,localStorage.setItem("refresh_token",e)},setAccessToken:function(t,e){t.access_token=e,localStorage.setItem("access_token",e),localStorage.setItem("isLoggedIn",!0)},setLoggedInUser:function(t,e){t.loggedInUser=e,t.isReady=!0},setIsAuthenticated:function(t,e){t.isAuthenticated=e},clearUserData:function(t){t.refresh_token="",t.access_token="",t.loggedInUser={},t.isAuthenticated=!1,localStorage.removeItem("refresh_token"),localStorage.removeItem("access_token"),localStorage.removeItem("isLoggedIn")},toggleConfirm:function(t){t.openConfirm=!t.openConfirm},setCenter:function(t,e){t.center=e},setCurrentLocation:function(t,e){t.currentLocation=e},toggleUploader:function(t){t.openUploader=!t.openUploader},setFile:function(t,e){t.file=e},addFile:function(t,e){t.file=[].concat(Object(Ne["a"])(e),Object(Ne["a"])(t.file))},removeFile:function(t,e){t.file=t.file.filter((function(t){return!e.includes(t.id)}))}},Le={refresh_token:localStorage.getItem("refresh_token"),access_token:localStorage.getItem("access_token"),loggedInUser:{},isAuthenticated:!1,isReady:!1,openConfirm:!1,center:[16.819814400000002,96.1511424],currentLocation:[16.819814400000002,96.1511424],openUploader:!1,file:[]};s["default"].use(r["a"]);var Me=new r["a"].Store({state:Le,mutations:Ae,actions:Te,getters:Oe}),ze=a("53ca"),Ue=a("d4ec"),qe=a("bee2"),Fe=function(){function t(e){Object(Ue["a"])(this,t),this.notification=e}return Object(qe["a"])(t,[{key:"display",value:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"normal",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"success";if("error"===a)if("object"!==Object(ze["a"])(t.response.data)||t.response.data.byteLength)this.notification({color:s,title:"status - "+t.response.status,text:t.response.statusText});else for(var i in t.response.data)this.notification({color:s,title:i,text:"string"===typeof t.response.data[i]?t.response.data[i]:t.response.data[i][0]});else"normal"===a&&this.notification({color:s,title:e,text:t})}}]),t}(),Be=a("574d"),Re=a.n(Be),Ye=(a("04f2"),a("466d"),a("a925"));function Ke(){var t=a("ac18"),e={};return t.keys().forEach((function(a){var s=a.match(/([A-Za-z0-9-_]+)\./i);if(s&&s.length>1){var i=s[1];e[i]=t(a)}})),e}s["default"].use(Ye["a"]);var Ve=new Ye["a"]({locale:Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_I18N_LOCALE||"en",fallbackLocale:Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_I18N_FALLBACK_LOCALE||"en",messages:Ke()});q.a.defaults.baseURL=L;var We=function(){q.a.interceptors.request.use((function(t){var e=Me.getters.accessToken;return e&&(t.headers.Authorization="Bearer ".concat(e)),t}),(function(t){return Promise.reject(t)})),q.a.interceptors.response.use((function(t){return t}),function(){var t=Object(Ee["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.config,401!==e.response.status||!a.url.includes("api/auth/login/refresh")){t.next=7;break}return Me.commit("clearUserData"),De.push("/login"),t.abrupt("return",Promise.reject(e));case 7:if(401!==e.response.status||a._retry){t.next=12;break}return a._retry=!0,t.next=11,Me.dispatch("refreshToken");case 11:return t.abrupt("return",q()(a));case 12:return t.abrupt("return",Promise.reject(e));case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},Qe=(a("0fae"),a("5c96")),He=a.n(Qe),Je=a("b2d6"),Ge=a.n(Je),Ze=(a("bee1"),a("5aea"),a("89e3"),a("b5a1"),a("c98c"),a("caf9")),Xe=a("1321"),ta=a.n(Xe),ea=a("74bf"),aa=a.n(ea),sa=a("7c76");s["default"].use(He.a,{locale:Ge.a}),s["default"].use(Ze["a"],{error:"http://localhost:3001/media/images/error.png",loading:"http://localhost:3001/media/images/loader.svg"}),s["default"].use(Re.a,{colors:{primary:"#6A53D6"}}),s["default"].use(a("2ead")),s["default"].use(ta.a),s["default"].component("apexchart",ta.a),s["default"].component("input-tag",aa.a),s["default"].use(sa["a"]),We(),s["default"].config.productionTip=!1,new s["default"]({created:function(){s["default"].prototype.$noti=new Fe(this.$vs.notification);var t=localStorage.getItem("theme");if(t)"dark"===t?this.$vs.setTheme("dark"):this.$vs.setTheme("light");else{var e=new Date;e.getHours()>19||e.getHours()<6?this.$vs.setTheme("dark"):this.$vs.setTheme("light")}var a=localStorage.getItem("isLoggedIn");this.$store.commit("setIsAuthenticated",!!a),a&&(this.$store.dispatch("fetchUser"),this.$store.dispatch("getFile"))},render:function(t){return t(Q)},i18n:Ve,router:De,store:Me}).$mount("#app")},"5aea":function(t,e,a){},"5d02":function(t,e,a){},"69ff":function(t,e,a){},"6e01":function(t,e,a){"use strict";var s=a("e256"),i=a.n(s);i.a},7124:function(t,e,a){"use strict";var s=a("951d"),i=a.n(s);i.a},"7d4e":function(t){t.exports=JSON.parse('{"message":"Hello!","Dashboard":"Dashboard","Shops":"Shops"}')},"89e3":function(t,e,a){},"951d":function(t,e,a){},ac18:function(t,e,a){var s={"./en.json":"7d4e","./tai.json":"1545"};function i(t){var e=n(t);return a(e)}function n(t){if(!a.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}i.keys=function(){return Object.keys(s)},i.resolve=n,t.exports=i,i.id="ac18"},b106:function(t,e,a){},b5a1:function(t,e,a){},bee1:function(t,e,a){},c7fc:function(t,e,a){"use strict";var s=a("b106"),i=a.n(s);i.a},c98c:function(t,e,a){},dc62:function(t,e,a){"use strict";var s=a("ece1"),i=a.n(s);i.a},e23d:function(t,e,a){},e256:function(t,e,a){},e480:function(t,e,a){"use strict";var s=a("5d02"),i=a.n(s);i.a},eb68:function(t,e,a){"use strict";var s=a("439f"),i=a.n(s);i.a},ece1:function(t,e,a){}});
//# sourceMappingURL=app.21fb83f2.js.map